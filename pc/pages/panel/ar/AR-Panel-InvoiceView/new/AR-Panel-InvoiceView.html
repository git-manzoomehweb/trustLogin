<basis core="call" file="Client_CheckRkey.inc"></basis> <!-- updated login -->

<basis core="group" name="0" if="[##db.checkrkey.userid|(0)##]=0">
    <p style="text-align:center;font-family:tahoma">لا يسمح لك للوصول إلى هذه الصفحة</p>
</basis>

<basis core="group" name="1" if="[##db.checkrkey.userid|(0)##]<>0">
    <basis core="external.fly.ws" procedurename="dbsource" source="cmsDbService2" name="db">
        <member name="get_unit_currency" method="cms" query='{
                "name": "db",
                "mid": "20",
                "member": [
                    {
                        "type": "list",
                        "dmnid": "[##cms.cms.domainid##]",
                        "name": "q",
                        "lid": "3",
                        "request": "get_unit_currency"
                    }
                ]
            }' />
    </basis>
    <basis core="group" name="Delay_1">
        <basis core='inlinesource' name='db'>
            <member name='unit_title' format="json" preview=""
                postsql="select value from [db.unit_title] where field = 'title'">
                {"root": [##db.get_unit_currency.result##]}
            </member>
        </basis>
        <basis core="dbsource" source="accounting" lid="3" name="db" factorid="[##cms.query.id##]"
            ownerid="[##cms.cms.ownerid##]">
            <member name="StatusAccount" type="list" request="accreport" preview="" />
        </basis>

        <basis core="dbsource" source="accounting" lid="3" name="db" factorid="[##cms.query.id##]"
            ownerid="[##cms.cms.ownerid##]">
            <member name="Remaining_amount" type="list" request="accreport" preview=""
                postsql="select taraz from [db.Remaining_amount] where description = 'taraz'" />
        </basis>
        <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource">
            <member name="invoiceNote_List" method="panel" query='
            { 
                "name": "db", 
                "mid": "20",
                "member":
                [
                    { 
                        "name": "q",
                        "type":"list",
                        "request": "Panel_invoiceNote_List",
                        "factorid" : "[##cms.query.id##]", 
                        "userid":"[##db.checkrkey.userid|(0)##]"

                    }
                ] 
            }' postsql="select replace(replace(replace(replace(result,'None','undefined'),' inf','Infinity'),' -inf',' -Infinity'),' nan','NaN') as 'result' from [db.invoiceNote_List]"
                preview="" />
        </basis>
        <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource">
            <member name="invoicerequest_List" method="panel" query='
            { 
                "name": "db", 
                "mid": "20",
                "member":
                [
                    { 
                        "name": "q",
                        "type":"list",
                        "factorid" : "[##cms.query.id##]", 
                         "dmnid" : "[##cms.cms.domainid##]",
                        "lid":"3",
                        "request": "Panel_Invoice_Refund_List",
                    }
                ] 
            }' postsql="select replace(replace(replace(replace(result,'None','undefined'),' inf','Infinity'),' -inf',' -Infinity'),' nan','NaN') as 'result' from [db.invoicerequest_List]"
                preview="" />
        </basis>
        <basis core="external.fly.ws" source="cmsDbService2" procedurename="dbsource" name="db">
            <member name="passengers" method="cms" query='{
                "name" : "db",
                "mid" : "20",
                "member" : [
                    {
                        "type" : "list",
                        "name" : "q",
                        "request" : "PassengersList",
                        "dmnid" : "[##cms.cms.domainid##]",
                        "factorid" : "[##cms.query.id##]"
                    }
                ]}' preview="" />
        </basis>
        <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource">
            <member name="payment_permission" method="cms" query='
            { 
                "name": "db", 
                "mid": "20",
                "member":
                [ 
                    { 
                        "type":"list",
                        "name": "q", 
                        "request": "paymentPermission", 
                        "factorid":"[##cms.query.id##]",
                    }
                ]
            }' preview="" />
        </basis>

        <basis core="inlinesource" name="db">
            <member name="banks">
                <row bankcode="0" name="لم يتم الدفع" />
                <row bankcode="1" name="بنك سامان" />
                <row bankcode="2" name="بنك ملت" />
                <row bankcode="3" name="بنك باسارجاد" />
                <row bankcode="4" name="بنك بارسيان" />
                <row bankcode="5" name="بارس بال" />
                <row bankcode="6" name="بوابة التجارة الإلكترونية الفارسية" />
                <row bankcode="7" name="بنك صادرات" />
                <row bankcode="7" name="بنك صادرات" />
                <row bankcode="9" name="بوابة سخافات" />
                <row bankcode="8" name="بوابة آسان برداخت" />
                <row bankcode="12" name="بنك کردشکری" />
                <row bankcode="13" name="كيبا (خاص للمتقاعدين والمتقاعدين من مؤسسة الضمان الاجتماعي)" />
                <row bankcode="15" name="بوابة آقای برداخت" />
                <row bankcode="11" name="زرین بال" />
                <row bankcode="16" name="آینده" />
                <row bankcode="17" name="آرکابیمنت" />
                <row bankcode="18" name=" رفاه" />
                <row bankcode="19" name="شهر" />
                <row bankcode="21" name="clover" />
                <row bankcode="22" name="رایان کارت" />
                <row bankcode="23" name="ایران کیش" />
                <row bankcode="32" name="پاد" />
            </member>
        </basis>


        <basis core="dbsource" source="accounting" name="db" eid="1" factorid="[##cms.query.id##]">
            <member name="payment" type="list" request="listpayment" />
        </basis>

        <basis core="group" name="Delay_2">
            <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource">
                <member method="cms" name="InvoiceView" query='
             { 
                "name": "db", 
                "mid": "20", 
                "member":
                [
                    { 
                        "name": "q", 
                        "type":"list", 
                        "request":"invoiceview", 
                        "id":"[##cms.query.id##]",
                        "userid": "[##db.checkrkey.userid|(0)##]"  ,
                        "lid":"3"
                    }
                ] 
            }' />
            </basis>
            <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource">
                <member method="cms" name="Document" query='
             {
                   "name": "db",
                "mid": "20",
                "member": 
                [
                      {
                        "name": "q",
                        "type": "view",
                        "id": "[##cms.query.id##]",
                        "rkey": "[##cms.cookie.rkey##]",
                        "lid":"3",
                        "request": "invoice_Document",
                    }
                ]
            }' preview="" />
            </basis>

            <basis core="inlinesource" name="db">
                <member name="CustomerPayment" leftTblCol="db.banks.bankcode" rightTblCol="db.payment.banktype"
                    joinType="innerjoin" format="join" />
            </basis>

            <basis core="group" name="Delay_3">
                <basis core='inlinesource' name='db'>
                    <member name="InvoiceView_Tree" format="json" preview="">{"root":[##db.InvoiceView.result##]}
                    </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='Document_Tree' format="json" preview=""> {"root":[##db.Document.result##]} </member>
                    <member name='invoice_NoteList' format="json" preview="">{"root":[##db.invoiceNote_List.result##]}
                    </member>
                    <member name='InvoiceNote' format="json"
                        postsql="select value from [db.InvoiceNote] where Field = 'count'" preview="">
                        {"root":[##db.invoiceNote_List.result##]}
                    </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='InvoiceOpen' format="json"
                        postsql="select value from [db.InvoiceOpen] where Field = 'open'" preview="">
                        {"root":[##db.InvoiceView.result##]}
                    </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='InvoiceClear' format="json"
                        postsql="select value from [db.InvoiceClear] where Field = 'clear'" preview="">
                        {"root":[##db.InvoiceView.result##]}
                    </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='InvoiceCancel' format="json"
                        postsql="select value from [db.InvoiceCancel] where Field = 'cancel'" preview="">
                        {"root":[##db.InvoiceView.result##]}
                    </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='InvoiceType' format="json"
                        postsql="select value from [db.InvoiceType] where Field = 'invoicetype'" preview="">
                        {"root":[##db.InvoiceView.result##]}
                    </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='Invoicerequest' format="json"
                        postsql="select value from [db.Invoicerequest] where Field = 'count'" preview="">
                        {"root":[##db.invoicerequest_List.result##]}
                    </member>
                </basis>
                <basis core='inlinesource' name='db'>
                    <member name='passengersjson' format="json" preview=""> {"root":[##db.passengers.result##]}
                    </member>
                    <member name='invoice_requestList' format="json" preview="">
                        {"root":[##db.invoiceRequest_List.result##]} </member>
                </basis>
                <!doctype html>
                <html>

                <head>
                    <basis core="group" if="[##db.InvoiceOpen.value##]=0">
                        <title>عرض العقد</title>
                    </basis>
                    <basis core="group" if="[##db.InvoiceOpen.value##]=1">
                        <title>الحجزالمبدنی</title>
                    </basis>
                    <meta charset="utf-8">
                    <style type="text/css">
                        <basis core="call" file="Panel_User_css.inc" />
                    </style>
                    <link rel="stylesheet" href="/css/Panel-master-css.css" type="text/css">
                    <script src="[##cms.cms.cdn##]/_js/jquery-1.8.0.min.js"></script>
                </head>

                <body>
                    <div class="Panel_Container">
                        <basis core="call" file="AR-Panel-Menu.inc" />

                        <div class="Panel_Wrraper_Box">
                            <basis core="call" file="AR-Panel-Dashboard-Header.inc" />
                            <basis core="call" file="AR-Panel-Icon.inc" />

                            <div class="Panel_invoice_View">
                                <div class="Panel_Box">
                                    <div class="Panel_Box_title">
                                        <span>رقم
                                            <basis core="group" if="[##db.InvoiceOpen.value##]=0">الحجز
                                                ([##cms.query.id##])</basis>
                                            <basis core="group" if="[##db.InvoiceOpen.value##]=1">حجزمبدنی
                                                ([##cms.query.id##])</basis>
                                        </span>

                                        <basis core="group" if="[##db.InvoiceOpen.value##]=1">
                                            <a href="/AR-InvoicePdf.bc?id=[##cms.query.id##]&open=[##cms.query.open##]"
                                                class="Panel_Edit_icon pdf" title="تنزيل العقد المسبق"
                                                target="_blank"></a>
                                        </basis>
                                    </div>

                                    <div class="Panel_Box_Content">
                                        <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                            parentidcol="parentid" nullvalue="null">
                                            <face filter="Field in ('baggage')"></face>
                                            <face filter="Field in ('title')">
                                                <div dir="rtl">@value</div>
                                            </face>
                                            <face filter="type in ('Array','object')">@Child</face>
                                        </basis>
                                        <div class="clr"></div>
                                    </div>
                                </div>

                                <div class="invoice_Details_Box">
                                    <div class="invoice_Details">
                                        <div class="Details">
                                            <div class="Details_title">
                                                <p>
                                                    <span>[##cms.query.id##]</span>
                                                    <basis core="group" if="[##db.InvoiceOpen.value##]=0">
                                                        <span>الحجز</span></basis>
                                                    <basis core="group" if="[##db.InvoiceOpen.value##]=1">
                                                        <span>حجزمبدنی</span></basis>
                                                </p>
                                                <p><i class="fa fa-barcode"></i></p>
                                            </div>
                                        </div>
                                    </div>

                                    <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                        parentidcol="parentid" nullvalue="null">
                                        <face filter="Field in ('travelDate','invoiceDetails','products','creditPay')">
                                        </face>
                                        <face filter="Field in ('invoiceDate')">
                                            <div class="invoice_Details">
                                                <div class="Details">
                                                    <div class="Details_title">
                                                        <p>@child</p>
                                                        <p><i class="fa fa-calendar-check-o "></i></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </face>

                                        <face filter="Field in ('mstring')"><span>@value</span></face>
                                        <face filter="type in ('Array','object')">@Child</face>
                                    </basis>

                                    <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                        parentidcol="parentid" nullvalue="null">
                                        <face
                                            filter="Field in ('travelDate','invoiceDetails','products','creditPay','priceDetails')">
                                        </face>
                                        <face filter="Field in ('time')">
                                            <div class="invoice_Details">
                                                <div class="Details">
                                                    <div class="Details_title">
                                                        <p><span>@value</span><span>الوقت</span></p>
                                                        <p><i class="fa fa-clock-o"></i></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </face>
                                        <face filter="type in ('Array','object')">@Child</face>
                                    </basis>

                                    <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                        parentidcol="parentid" nullvalue="null">
                                        <face filter="Field in ('invoiceDate','products','creditPay')"></face>
                                        <face filter="Field in ('travelDate')">
                                            <div class="invoice_Details">
                                                <div class="Details">
                                                    <div class="Details_title">
                                                        <p class="typeDate_[##db.InvoiceType.Value##]">@child</p>
                                                        <p class="iconDate_[##db.InvoiceType.Value##]"><i
                                                                class="fa fa-plane"></i></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </face>
                                        <face filter="Field in ('mstring')"><span>@value</span></face>
                                        <face filter="type in ('Array','object')">@Child</face>
                                    </basis>

                                    <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                        parentidcol="parentid" nullvalue="null">
                                        <face filter="Field in ('persons')">
                                            <div class="invoice_Details">
                                                <div class="Details">
                                                    <div class="Details_title">
                                                        <p>
                                                            <span>@value شخص</span>
                                                            <span>المسافرین</span>
                                                        </p>
                                                        <p><i class="fa fa-users"></i></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </face>

                                        <face filter="type in ('Array','object')">@Child</face>
                                    </basis>

                                    <div class="clr"></div>
                                </div>

                                <div id="Invoice-Tab">
                                    <div class="Tab_Section">
                                        <a class="Tab_Title" onclick="show_information(event,'1')"
                                            id="defaultOpen">معلومات الحجز</a>
                                        <a class="Tab_Title" onclick="show_information(event,'2')">الأمور المالية</a>
                                        <a class="Tab_Title" onclick="show_information(event,'3')">وثائق</a>
                                        <a class="Tab_Title" onclick="show_information(event,'4')">الدفع</a>
                                        <a class="Tab_Title" onclick="show_information(event,'5')">ملاحظات
                                            <span class="noteCount">[##db.InvoiceNote.Value##]</span>
                                        </a>
                                        <basis core="group" if="[##db.InvoiceOpen.value##]=0">
                                            <a class="Tab_Title" onclick="show_information(event,'6')">طلب الغاء وتغيير
                                                <span class="noteCount">([##db.Invoicerequest.Value|(0)##])</span>
                                            </a>
                                        </basis>
                                    </div>

                                    <div id="1" class="Tab_Content">
                                        <!-- account ############################################################################################## -->
                                        <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                            parentidcol="parentid" nullvalue="null">
                                            <face
                                                filter="Field in ('invoiceDetails','invoiceDate','products','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','creditPay')">
                                            </face>
                                            <face filter="Field in ('account')">@child</face>
                                            <face filter="Field in ('person')">
                                                <table class="invoice_tbl">
                                                    <caption class="invoice_caption">
                                                        <p><span>معلومات الشرکة</span></p>
                                                    </caption>
                                                    <thead>
                                                        <tr>
                                                            <th>الإسم </th>
                                                            <th>اللقب</th>
                                                            <th>البريد الإلكتروني</th>
                                                            <th>رقم الهاتف</th>
                                                            <th>رقم الموبایل</th>
                                                            <th>العنوان</th>
                                                            <th>جنس</th>
                                                            <th>الموظف المباشر</th>
                                                            <th>نوع العمیل</th>
                                                        </tr>
                                                    </thead>

                                                    <tbody class="invoice_tbody">
                                                        <tr>@Child</tr>
                                                    </tbody>
                                                </table>
                                            </face>

                                            <face filter="Field in ('mycounter_forPassenger')">
                                                <table class="invoice_tbl">
                                                    <caption class="invoice_caption">
                                                        <p><span>معلومات الشرکة</span></p>
                                                    </caption>
                                                    <thead>
                                                        <tr>
                                                            <th>الإسم </th>
                                                            <th>اللقب</th>
                                                            <th>البريد الإلكتروني</th>
                                                            <th>رقم الهاتف</th>
                                                            <th>رقم الموبایل</th>
                                                            <th>العنوان</th>
                                                            <th>جنس</th>
                                                            <th>العمیل وعداد العمل</th>
                                                            <th>نوع العمیل</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody class="invoice_tbody ">
                                                        <tr>@Child</tr>
                                                    </tbody>
                                                </table>
                                            </face>

                                            <face filter="Field in ('mycounter_forAgency')">
                                                <table class="invoice_tbl">
                                                    <caption class="invoice_caption">
                                                        <p><span>معلومات الشرکة</span></p>
                                                    </caption>
                                                    <thead>
                                                        <tr>
                                                            <th>اسم الشرکة </th>
                                                            <th>المدير العام</th>
                                                            <th>رقم الهاتف</th>
                                                            <th>العنوان</th>
                                                            <th>موقع الكتروني</th>
                                                            <th>العمیل وعداد العمل</th>
                                                            <th>نوع العمیل</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody class="invoice_tbody ">
                                                        <tr>@Child</tr>
                                                    </tbody>
                                                </table>
                                            </face>

                                            <face filter="Field in ('partner_agency')">
                                                <table class="invoice_tbl">
                                                    <caption class="invoice_caption">
                                                        <p><span>معلومات الشرکة</span></p>
                                                    </caption>
                                                    <thead>
                                                        <tr>
                                                            <th>اسم الشرکة </th>
                                                            <th>المدير العام</th>
                                                            <th>رقم الهاتف</th>
                                                            <th>العنوان</th>
                                                            <th>موقع الكتروني</th>
                                                            <th>عداد العمیل</th>
                                                            <th>الموظف المباشر</th>
                                                            <th>نوع العمیل</th>
                                                        </tr>
                                                    </thead>

                                                    <tbody class="invoice_tbody">
                                                        <tr>@Child</tr>
                                                    </tbody>
                                                </table>
                                            </face>

                                            <face filter="Field in ('supplier_agency')">
                                                <table class="invoice_tbl">
                                                    <caption class="invoice_caption">
                                                        <p><span>معلومات الشرکة</span></p>
                                                    </caption>
                                                    <thead>
                                                        <tr>
                                                            <th>اسم الشرکة </th>
                                                            <th>المدير العام</th>
                                                            <th>رقم الهاتف</th>
                                                            <th>العنوان</th>
                                                            <th>موقع الكتروني</th>
                                                            <th>الموظف المباشر</th>
                                                            <th>نوع العمیل</th>
                                                        </tr>
                                                    </thead>

                                                    <tbody class="invoice_tbody">
                                                        <tr>@Child</tr>
                                                    </tbody>
                                                </table>
                                            </face>

                                            <face filter="Field in ('firstname')">
                                                <td style="direction:rtl" data-label="الإسم">@value</td>
                                            </face>
                                            <face filter="Field in ('lastname')">
                                                <td style="direction:rtl" data-label="اللقب">@value</td>
                                            </face>
                                            <face filter="Field in ('email')">
                                                <td style="direction:rtl" data-label="البريد الإلكتروني">@value</td>
                                            </face>
                                            <face filter="Field in ('tel')">
                                                <td style="direction:ltr" data-label="رقم الهاتف">@value</td>
                                            </face>
                                            <face filter="Field in ('mobile')">
                                                <td style="direction:ltr" data-label="رقم الموبایل">@value</td>
                                            </face>
                                            <face filter="Field in ('address')">
                                                <td style="direction:rtl" data-label="العنوان">@value</td>
                                            </face>
                                            <face filter="Field in ('counterName')">
                                                <td style="direction:rtl" data-label="الموظف المباشر">@value</td>
                                            </face>

                                            <face filter="Field in ('agencyname')">
                                                <td style="direction: rtl;" data-label="اسم الشرکة">@value</td>
                                            </face>
                                            <face filter="Field in ('agencymanegername')">
                                                <td style="direction: rtl;" data-label="المدير العام">@value</td>
                                            </face>
                                            <face filter="Field in ('agencytell')">
                                                <td style="direction: ltr;" data-label="رقم الهاتف">@value</td>
                                            </face>
                                            <face filter="Field in ('agencyaddress')">
                                                <td style="direction: rtl;" data-label="العنوان">@value</td>
                                            </face>
                                            <face filter="Field in ('agencyweb')">
                                                <td style="direction: rtl;" data-label="موقع الكتروني">@value</td>
                                            </face>

                                            <face filter="Field in ('agencyid')">
                                                <input type="hidden" class="agencyid" value="@value">
                                            </face>

                                            <face filter="Field in ('namecounter')">
                                                <td data-label="الموظف المباشر">@value
                                            </face>
                                            <face filter="Field in ('familycounter')"> @value</td>
                                            </face>

                                            <face filter="Field in ('gender') and value not in ('0','1')">
                                                <td>-</td>
                                            </face>
                                            <face filter="Field in ('gender') and value='0'">
                                                <td data-label="جنس">أنثى</td>
                                            </face>
                                            <face filter="Field in ('gender') and value='1'">
                                                <td data-label="جنس">ذكر</td>
                                            </face>

                                            <face filter="Field in ('acctype') and value='243'">
                                                <td data-label="نوع العمیل">راكب</td>
                                            </face>
                                            <face filter="Field in ('acctype') and value='241'">
                                                <td data-label="نوع العمیل">عداد وكالتي الخاصة</td>
                                            </face>
                                            <face filter="Field in ('acctype') and value='181'">
                                                <td data-label="نوع العمیل">عداد وكالتي الخاصة</td>
                                            </face>
                                            <face filter="Field in ('acctype') and value='182'">
                                                <td data-label="نوع العمیل">المورد</td>
                                            </face>
                                            <face filter="Field in ('acctype') and value='242'">
                                                <td data-label="نوع العمیل">وكالة الشريك المقابل</td>
                                            </face>
                                            <face filter="type in ('Array','object')">@Child</face>
                                        </basis>

                                        <!-- passengesr ########################################################################################### -->
                                        <basis:111 core="group" if="[##db.InvoiceType.Value##] not in ('13')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDetails','invoiceDate','products','passengersvisa','account','priceDetails','baggages','bill','bill_request','creditPay')">
                                                </face>
                                                <face filter="Field in ('passengers')">
                                                    <table class="invoice_tbl">
                                                        <caption class="invoice_caption">
                                                            <p><span>معلومات المسافر </span></p>
                                                        </caption>
                                                        <thead>
                                                            <tr>
                                                                <th>الإسم </th>
                                                                <th>اللقب</th>
                                                                <th>تاريخ الميلاد</th>
                                                                <th>رمز دولي</th>
                                                                <th>رقم جواز السفر</th>
                                                                <th>تاريخ انتهاء الجواز</th>
                                                                <th>بلد</th>
                                                                <th>جنس</th>
                                                                <th>النطاق العمري مسافرین</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody class="invoice_tbody">@Child</tbody>
                                                    </table>
                                                </face>

                                                <face filter="Field in ('passengerinfo')">
                                                    <tr>@child</tr>
                                                </face>
                                                <face filter="Field in ('firstname')">
                                                    <td data-label="الإسم">@value</td>
                                                </face>
                                                <face filter="Field in ('lastname')">
                                                    <td data-label="اللقب">@value</td>
                                                </face>
                                                <face filter="Field in ('nationalcode')">
                                                    <td data-label="رمز دولي">@value</td>
                                                </face>
                                                <face filter="Field in ('passportcode')">
                                                    <td data-label="رقم جواز السفر">@value</td>
                                                </face>
                                                <face filter="Field in ('passportexpiration')">
                                                    <td data-label="تاريخ انتهاء الجواز">@value</td>
                                                </face>

                                                <face filter="Field in ('birthdate') and type in ('object')">
                                                    <td data-label="تاريخ الميلاد">@child</td>
                                                </face>
                                                <face
                                                    filter="Field in ('M_birthdate') and type in ('Scalar.String') and value not in ('-')">
                                                    <div>@value</div>
                                                </face>


                                                <face
                                                    filter="Field in ('M_birthdate') and type in ('Scalar.String') and value in ('-')">
                                                    <p></p>
                                                </face>


                                                <face filter="Field in ('countryofresidence')">
                                                    <td data-label="بلد">@child</td>
                                                </face>
                                                <face filter="Field in ('ecountryname')">@value</face>

                                                <face filter="Field in ('gender') and value = '0'">
                                                    <td data-label="جنس">أنثى</td>
                                                </face>
                                                <face filter="Field in ('gender') and value = '1'">
                                                    <td data-label="جنس">ذكر</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '0'">
                                                    <td class="typepassenger" data-label="النطاق العمري مسافرین"
                                                        style="direction: rtl;">رضيع</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '1'">
                                                    <td class="typepassenger" data-label="النطاق العمري مسافرین"
                                                        style="direction: rtl;">طفل</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '2'">
                                                    <td class="typepassenger" data-label="النطاق العمري مسافرین"
                                                        style="direction: rtl;">الكبار</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '3'">
                                                    <td class="typepassenger" data-label="النطاق العمري مسافرین"
                                                        style="direction: rtl;">طفل</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '4'">
                                                    <td class="typepassenger" data-label="النطاق العمري مسافرین"
                                                        style="direction: rtl;">الكبار (إضافي)</td>
                                                </face>
                                                <face filter="Field in ('wheelchair') and type in ('Scalar.String')">
                                                    <input type="hidden" value="@value" class="wheelchair"></face>
                                                <face filter="type in ('Array','object')">@Child</face>
                                            </basis>
                                        </basis:111>

                                        <basis:112 core="group" if="[##db.InvoiceType.Value##] in ('13')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDetails','invoiceDate','products','account','passengers','priceDetails','baggages','bill','bill_request','creditPay')">
                                                </face>
                                                <face filter="Field in ('passengersvisa')">
                                                    <table class="invoice_tbl">
                                                        <caption class="invoice_caption">
                                                            <p><span>Traveler Information</span></p>
                                                        </caption>
                                                        <thead>
                                                            <tr>
                                                                <th>الإسم </th>
                                                                <th>اللقب</th>
                                                                <th>تاريخ الميلاد</th>
                                                                <th>رمز دولي</th>
                                                                <th>اسم الاب</th>
                                                                <th>رقم جواز السفر</th>
                                                                <th>تاريخ انتهاء الجواز</th>
                                                                <th>تاريخ إصدار جواز السفر</th>
                                                                <th>بلد</th>
                                                                <th>بلد إصدار جواز السفر</th>
                                                                <th>مكان الولادة</th>
                                                                <th>جنس</th>
                                                                <th>النطاق العمري مسافرین</th>

                                                            </tr>
                                                        </thead>

                                                        <tbody class="invoice_tbody">@Child</tbody>
                                                    </table>
                                                </face>

                                                <face filter="Field in ('passengerinfo')">
                                                    <tr>@child</tr>
                                                </face>
                                                <face filter="Field in ('firstname')">
                                                    <td data-label="الإسم">@value</td>
                                                </face>
                                                <face filter="Field in ('lastname')">
                                                    <td data-label="اللقب">@value</td>
                                                </face>
                                                <face filter="Field in ('nationalcode')">
                                                    <td data-label="رمز دولي">@value</td>
                                                </face>
                                                <face filter="Field in ('passportcode')">
                                                    <td data-label="رقم جواز السفر">@value</td>
                                                </face>
                                                <face filter="Field in ('passportexpiration')">
                                                    <td data-label="تاريخ انتهاء الجواز">@value</td>
                                                </face>

                                                <face filter="Field in ('birthdate') and type in ('object')">
                                                    <td data-label="تاريخ الميلاد">@child</td>
                                                </face>
                                                <face
                                                    filter="Field in ('M_birthdate') and type in ('Scalar.String') and value not in ('-')">
                                                    <div>@value</div>
                                                </face>


                                                <face
                                                    filter="Field in ('M_birthdate') and type in ('Scalar.String') and value in ('-')">
                                                    <p></p>
                                                </face>


                                                <face filter="Field in ('countryofresidence')">
                                                    <td data-label="بلد">@child</td>
                                                </face>
                                                <face filter="Field in ('Countryofbirth')">
                                                    <td data-label="مكان الولادة">@child</td>
                                                </face>
                                                <face filter="Field in ('countryofpassportissue')">
                                                    <td data-label="بلد إصدار جواز السفر">@child</td>
                                                </face>
                                                <face filter="Field in ('ecountryname')">@value</face>
                                                <face filter="Field in ('fathername')">
                                                    <td data-label="اسم الاب">@value</td>
                                                </face>

                                                <face filter="Field in ('passportissuedate')">
                                                    <td data-label="تاريخ إصدار جواز السفر">@value</td>
                                                </face>
                                                <face filter="Field in ('gender') and value = '0'">
                                                    <td data-label="جنس">أنثى</td>
                                                </face>
                                                <face filter="Field in ('gender') and value = '1'">
                                                    <td data-label="جنس">ذكر</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '0'">
                                                    <td class="typepassenger" data-label="النطاق العمري مسافرین"
                                                        style="direction: rtl;">رضيع</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '1'">
                                                    <td class="typepassenger" data-label="النطاق العمري مسافرین"
                                                        style="direction: rtl;">طفل</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '2'">
                                                    <td class="typepassenger" data-label="النطاق العمري مسافرین"
                                                        style="direction: rtl;">الكبار</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '3'">
                                                    <td class="typepassenger" data-label="النطاق العمري مسافرین"
                                                        style="direction: rtl;">طفل</td>
                                                </face>
                                                <face filter="Field in ('type') and value = '4'">
                                                    <td class="typepassenger" data-label="النطاق العمري مسافرین"
                                                        style="direction: rtl;">الكبار (إضافي)</td>
                                                </face>
                                                <face filter="Field in ('wheelchair') and type in ('Scalar.String')">
                                                    <input type="hidden" value="@value" class="wheelchair"></face>
                                                <face filter="type in ('Array','object')">@Child</face>
                                            </basis>
                                        </basis:112>


                                        <!-- products ############################################################################################# -->
                                        <!-- type == 1 -->
                                        <basis:1 core="group" if="[##db.InvoiceType.Value##] in ('1')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','creditPay')">
                                                </face>
                                                <face filter="Field in ('products')">
                                                    <table class="invoice_tbl">
                                                        <caption class="invoice_caption">
                                                            <p><span> (معلومات الطيران في اتجاه واحد)</span></p>
                                                        </caption>
                                                        <thead>
                                                            <tr>
                                                                <th>الوجهة الاصلية</th>
                                                                <th>تاريخ</th>
                                                                <th>وقت الخروج</th>
                                                                <th>وقت الوصول</th>
                                                                <th>اسم شركة الطيران</th>
                                                                <th>شعار شركة الطيران</th>
                                                                <th>مطار الأصل</th>
                                                                <th>مطار الوجهة</th>
                                                                <th>رقم الرحلة الجوية</th>
                                                                <th>فئة الرحلة</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody>@child</tbody>
                                                    </table>
                                                </face>

                                                <face filter="Field in ('route') and type in ('object')">
                                                    <tr>@child</tr>
                                                </face>
                                                <face filter="Field in ('route') and type in ('scalar.String')">
                                                    <td data-label="الوجهة الاصلية">@value</td>
                                                </face>
                                                <face filter="Field in ('etime') and type in ('scalar.String')">
                                                    <td data-label="وقت الخروج">@value</td>
                                                </face>
                                                <face filter="Field in ('atime') and type in ('scalar.String')">
                                                    <td data-label="وقت الوصول">@value</td>
                                                </face>
                                                <face filter="Field in ('class') and type in ('scalar.String')">
                                                    <td data-label="فئة الرحلة">@value</td>
                                                </face>
                                                <face filter="Field in ('routecode') and type in ('scalar.String')">
                                                    <td data-label="رقم الرحلة الجوية">@value</td>
                                                </face>

                                                <face filter="Field in ('airline')">
                                                    <td data-label="اسم شركة الطيران">@value</td>
                                                </face>
                                                <face filter="Field in ('airlineimage')">
                                                    <td data-label="شعار شركة الطيران"><img width="80px" src="/@value">
                                                    </td>
                                                </face>

                                                <face filter="Field in ('routeDate')">
                                                    <td data-label="تاريخ">@Child</td>
                                                </face>
                                                <face filter="Field in ('mstring')">
                                                    <div>@value</div>
                                                </face>

                                                <face filter="Field in ('startairport')">
                                                    <td data-label="مطار الأصل">@Child</td>
                                                </face>
                                                <face filter="Field in ('endairport')">
                                                    <td data-label="مطار الوجهة">@Child</td>
                                                </face>
                                                <face filter="Field in ('airport')">
                                                    <div>@value</div>
                                                </face>
                                                <face filter="Field in ('startotherinfo')">
                                                    <div>@Child</div>
                                                </face>
                                                <face filter="Field in ('shortname')">@value | </face>
                                                <face filter="Field in ('city')">@value</face>
                                                <face filter="type in ('Array','object')">@Child</face>
                                            </basis>
                                        </basis:1>

                                        <!-- type == 2 -->
                                        <basis:2 core="group" if="[##db.InvoiceType.Value##] in ('2','4','6')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','creditPay')">
                                                </face>
                                                <face filter="Field in ('products')">
                                                    <table class="invoice_tbl">
                                                        <caption class="invoice_caption">
                                                            <p><span>(معلومات الطيران في اتجاه واحد)</span></p>
                                                        </caption>
                                                        <thead>
                                                            <tr>
                                                                <th>الوجهة الاصلية</th>
                                                                <th>تاريخ</th>
                                                                <th>وقت الخروج</th>
                                                                <th>وقت الوصول</th>
                                                                <th>اسم شركة الطيران</th>
                                                                <th>شعار شركة الطيران</th>
                                                                <th>مطار الأصل</th>
                                                                <th>مطار الوجهة</th>
                                                                <th>رقم الرحلة الجوية</th>
                                                                <th>فئة الرحلة</th>
                                                            </tr>
                                                        </thead>

                                                        @child
                                                    </table>
                                                </face>

                                                <face filter="Field in ('hotel','transfer','insurance')"></face>
                                                <face filter="Field in ('departure') and type in ('array')">
                                                    <tbody>
                                                        <tr>
                                                            <td class="row_type_[##cms.form.type##]" colspan="10"
                                                                style="background:#F9ECF9;text-align:right;padding-right:22px">
                                                                مسار المالمتبقیة
                                                            </td>
                                                        </tr>
                                                        @child
                                                    </tbody>
                                                </face>

                                                <face filter="Field in ('return') and type in ('array')">
                                                    <tbody>
                                                        <tr>
                                                            <td class="row_type_[##cms.form.type##]" colspan="10"
                                                                style="background:#F9ECF9;text-align:right;padding-right:22px">
                                                                مسار العودة
                                                            </td>
                                                        </tr>
                                                        @child
                                                    </tbody>
                                                </face>

                                                <face filter="Field in ('route') and type in ('object')">
                                                    <tr>@child</tr>
                                                </face>
                                                <face filter="Field in ('route') and type in ('scalar.String')">
                                                    <td data-label="الوجهة الاصلية">@value</td>
                                                </face>
                                                <face filter="Field in ('etime') and type in ('scalar.String')">
                                                    <td data-label="وقت الخروج">@value</td>
                                                </face>
                                                <face filter="Field in ('atime') and type in ('scalar.String')">
                                                    <td data-label="وقت الوصول">@value</td>
                                                </face>
                                                <face filter="Field in ('class') and type in ('scalar.String')">
                                                    <td data-label="فئة الرحلة">@value</td>
                                                </face>
                                                <face filter="Field in ('routecode') and type in ('scalar.String')">
                                                    <td data-label="رقم الرحلة الجوية">@value</td>
                                                </face>

                                                <face filter="Field in ('airline')">
                                                    <td data-label="اسم شركة الطيران">@value</td>
                                                </face>
                                                <face filter="Field in ('airlineimage')">
                                                    <td data-label="شعار شركة الطيران"><img width="80px" src="/@value">
                                                    </td>
                                                </face>

                                                <face filter="Field in ('routeDate')">
                                                    <td data-label="تاريخ">@Child</td>
                                                </face>
                                                <face filter="Field in ('mstring')">
                                                    <div>@value</div>
                                                </face>

                                                <face filter="Field in ('startairport')">
                                                    <td data-label="مطار الأصل">@Child</td>
                                                </face>
                                                <face filter="Field in ('endairport')">
                                                    <td data-label="مطار الوجهة">@Child</td>
                                                </face>
                                                <face filter="Field in ('airport')">
                                                    <div>@value</div>
                                                </face>
                                                <face filter="Field in ('startotherinfo')">
                                                    <div>@Child</div>
                                                </face>
                                                <face filter="Field in ('shortname')">@value | </face>
                                                <face filter="Field in ('city')">@value</face>
                                                <face filter="type in ('Array','object')">@Child</face>
                                            </basis>
                                        </basis:2>
                                        <!-- type == 7 -->
                                        <basis:14 core="group" if="[##db.InvoiceType.Value##] in ('7')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','creditPay')">
                                                </face>
                                                <face filter="Field in ('products')">
                                                    <table class="invoice_tbl">
                                                        <caption class="invoice_caption">
                                                            <p><span>(معلومات متعددة المدن)</span></p>
                                                        </caption>
                                                        <thead>
                                                            <tr>
                                                                <th>الوجهة الاصلية</th>
                                                                <th>تاريخ</th>
                                                                <th>وقت الخروج</th>
                                                                <th>وقت الوصول</th>
                                                                <th>اسم شركة الطيران</th>
                                                                <th>شعار شركة الطيران</th>
                                                                <th>مطار الأصل</th>
                                                                <th>مطار الوجهة</th>
                                                                <th>رقم الرحلة الجوية</th>
                                                                <th>فئة الرحلة</th>
                                                            </tr>
                                                        </thead>

                                                        @child
                                                    </table>
                                                </face>

                                                <face filter="Field in ('hotel','transfer','insurance')"></face>
                                                <face filter="Field in ('departure') and type in ('array')">
                                                    <tbody>
                                                        <tr>
                                                            <td class="row_type_[##cms.form.type##]" colspan="10"
                                                                style="background:#F9ECF9;text-align:right;padding-right:22px">
                                                                الطريق الأول
                                                            </td>
                                                        </tr>
                                                        @child
                                                    </tbody>
                                                </face>

                                                <face filter="Field in ('return') and type in ('array')">
                                                    <tbody>
                                                        <tr>
                                                            <td class="row_type_[##cms.form.type##]" colspan="10"
                                                                style="background:#F9ECF9;text-align:right;padding-right:22px">
                                                                الطريق الثاني
                                                            </td>
                                                        </tr>
                                                        @child
                                                    </tbody>
                                                </face>

                                                <face filter="Field in ('route') and type in ('object')">
                                                    <tr>@child</tr>
                                                </face>
                                                <face filter="Field in ('route') and type in ('scalar.String')">
                                                    <td data-label="الوجهة الاصلية">@value</td>
                                                </face>
                                                <face filter="Field in ('etime') and type in ('scalar.String')">
                                                    <td data-label="وقت الخروج">@value</td>
                                                </face>
                                                <face filter="Field in ('atime') and type in ('scalar.String')">
                                                    <td data-label="وقت الوصول">@value</td>
                                                </face>
                                                <face filter="Field in ('class') and type in ('scalar.String')">
                                                    <td data-label="فئة الرحلة">@value</td>
                                                </face>
                                                <face filter="Field in ('routecode') and type in ('scalar.String')">
                                                    <td data-label="رقم الرحلة الجوية">@value</td>
                                                </face>

                                                <face filter="Field in ('airline')">
                                                    <td data-label="اسم شركة الطيران">@value</td>
                                                </face>
                                                <face filter="Field in ('airlineimage')">
                                                    <td data-label="شعار شركة الطيران"><img width="80px" src="/@value">
                                                    </td>
                                                </face>

                                                <face filter="Field in ('routeDate')">
                                                    <td data-label="تاريخ">@Child</td>
                                                </face>
                                                <face filter="Field in ('mstring')">
                                                    <div>@value</div>
                                                </face>

                                                <face filter="Field in ('startairport')">
                                                    <td data-label="مطار الأصل">@Child</td>
                                                </face>
                                                <face filter="Field in ('endairport')">
                                                    <td data-label="مطار الوجهة">@Child</td>
                                                </face>
                                                <face filter="Field in ('airport')">
                                                    <div>@value</div>
                                                </face>
                                                <face filter="Field in ('startotherinfo')">
                                                    <div>@Child</div>
                                                </face>
                                                <face filter="Field in ('shortname')">@value | </face>
                                                <face filter="Field in ('city')">@value</face>
                                                <face filter="type in ('Array','object')">@Child</face>
                                            </basis>
                                        </basis:14>

                                        <!-- type == 3 -->
                                        <basis:3 core="group" if="[##db.InvoiceType.Value##] in ('3','4','6','10')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','creditPay')">
                                                </face>
                                                <face filter="Field in ('products')">
                                                    <table class="invoice_tbl">
                                                        <caption class="invoice_caption">
                                                            <p><span>(معلومات الفندق)</span></p>
                                                        </caption>
                                                        <thead>
                                                            <tr>
                                                                <th>اسم فندق</th>
                                                                <th>درجة الفندق</th>
                                                                <th>مدينة</th>
                                                                <th>غرفة</th>
                                                                <th>نوع الغرفة</th>
                                                                <th>موعد الدخول</th>
                                                                <th>تاريخ الخروج</th>
                                                                <th>المسافرین</th>
                                                                <th>خدمات</th>
                                                            </tr>
                                                        </thead>

                                                        @child
                                                    </table>
                                                </face>

                                                <face
                                                    filter="Field in ('departure','return','transfer','insurance','transfers','services')">
                                                </face>
                                                <face filter="Field in ('hotel') and type in ('array')">
                                                    <tbody>
                                                        <tr>
                                                            <td colspan="9"
                                                                style="background:#F9ECF9;text-align:right;padding:15px 0">
                                                            </td>
                                                        </tr>
                                                        @child
                                                    </tbody>
                                                </face>

                                                <face filter="Field in ('room')">
                                                    <tr>@Child</tr>
                                                </face>
                                                <face filter="Field in ('hotelName')">
                                                    <td data-label="اسم فندق">@value</td>
                                                </face>
                                                <face filter="Field in ('cityName')">
                                                    <td data-label="مدينة">@value</td>
                                                </face>
                                                <face filter="Field in ('roomNumber')">
                                                    <td data-label="غرفة">@value</td>
                                                </face>
                                                <face filter="Field in ('roomType')">
                                                    <td data-label="نوع الغرفة">@value</td>
                                                </face>
                                                <face filter="Field in ('service')">
                                                    <td data-label="خدمات">@value</td>
                                                </face>

                                                <face filter="Field in ('hotelStar')">
                                                    <td data-label="درجة الفندق">
                                                        <img src="http://185.44.36.230/reservation/images/@value.png"
                                                            width="70" alt="@value نجوم">
                                                    </td>
                                                </face>

                                                <face filter="Field in ('fromDate')">
                                                    <td data-label="موعد الدخول">@child</td>
                                                </face>
                                                <face filter="Field in ('toDate')">
                                                    <td data-label="تاريخ الخروج">@child</td>
                                                </face>
                                                <face filter="Field in ('passengers')">
                                                    <td data-label="المسافرین">@child</td>
                                                </face>

                                                <face filter="Field in ('mstring')">
                                                    <div>@value</div>
                                                </face>

                                                <face filter="Field in ('passengersRoom')">
                                                    <td data-label="المسافرین">@child</td>
                                                </face>
                                                <face filter="Field in ('adult')"><span class="passengers">@value
                                                        الكبار</span></face>
                                                <face filter="Field in ('child Withbed') and value <> '0'"><span
                                                        class="passengers">@value طفل (مع سرير)</span></face>
                                                <face filter="Field in ('child Withoutbed') and value <> '0'"><span
                                                        class="passengers">@value طفل (بدون سرير)</span></face>
                                                <face filter="Field in ('infant') and value <> '0'"><span
                                                        class="passengers">@value رضيع</span></face>
                                                <face filter="Field in ('extra Adult') and value <> '0'"><span
                                                        class="passengers">@value الكبار اضافية</span></face>
                                                <face filter="type in ('Array','object')">@Child</face>
                                            </basis>
                                        </basis:3>

                                        <basis:333 core="group" if="'[##db.InvoiceType.Value##]' in ('3','6')">
                                            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id"
                                                parentidcol="parentid" nullvalue="null">
                                                <face
                                                    filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','Financial')">
                                                </face>
                                                <face filter="Field in ('products')">
                                                    @child
                                                </face>

                                                <face
                                                    filter="Field in ('departure','return','transfer','insurance','hotel','transfers')">
                                                </face>
                                                <face
                                                    filter="Field in ('services') and type in ('array') and value <> '[]'">
                                                    <table class="invoice_tbl product_tbl">

                                                        <caption class="invoice_caption">
                                                            <p><span>(معلومات الخدمة)</span></p>
                                                        </caption>
                                                        <thead>
                                                            <tr>

                                                                <td>اسم الراكب</td>
                                                                <td>اسم الخدمة</td>
                                                                <td>خدمة ويب</td>
                                                                <td>السعر الكلي</td>
                                                                <td>وحدة</td>

                                                            </tr>
                                                        </thead>

                                                        <tbody class="invoice_tbody"> @child</tbody>
                                                    </table>
                                                </face>

                                                <face filter="Field in ('service')">
                                                    <tr>@Child</tr>
                                                </face>
                                                <face filter="Field in ('service_passengerlist')">
                                                    <td>@Child</td>
                                                </face>
                                                <face filter="Field in ('servicename')">
                                                    <td>@value</td>
                                                </face>
                                                <face filter="Field in ('webservices')">
                                                    <td>@child</td>
                                                </face>
                                                <face filter="Field in ('webservice')">@value</face>
                                                <face filter="Field in ('refnumber')">/@value</face>
                                                <face filter="Field in ('servicecost')">
                                                    <td>@value</td>
                                                </face>
                                                <face filter="Field in ('serviceunit')">
                                                    <td>@value</td>
                                                </face>
                                                <face filter="Field in ('firstname')">
                                                    <div><span>@value-</span>
                                                </face>
                                                <face filter="Field in ('lastname')"><span>@value</span>
                                    </div>
                                    </face>


                                    <face filter="Field in ('cancel') and value ='1'">

                                        <input type="hidden" name="" class="canceli" value="1">
                                    </face>
                                    <face filter="Field in ('cancel') and value ='0'">

                                        <input type="hidden" name="" class="canceli" value="0">
                                    </face>




                                    <face filter="type in ('Array','object')">@Child</face>
            </basis>

            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                <face
                    filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','Financial')">
                </face>
                <face filter="Field in ('products')">
                    @child
                </face>

                <face filter="Field in ('departure','return','transfer','insurance','hotel','services')"></face>
                <face filter="Field in ('transfers')">
                    <table class="invoice_tbl product_tbl">
                        <caption class="invoice_caption">
                            <p><span>(نقل المعلومات)</span></p>
                        </caption>
                        <thead>
                            <tr>

                                <td>اسم الخدمة</td>
                                <td>اسم التحويل</td>
                                <td>اكتب</td>
                                <td>مطار</td>
                                <td>تاريخ المالمتبقیة</td>
                                <td>تاريخ العودة</td>
                                <td>المالمتبقیة</td>
                                <td>عودة كود الطريق</td>
                                <td>وقت المالمتبقیة</td>
                                <td>وقت العودة</td>
                                <td>خدمة ويب</td>
                                <td>السعر الكلي</td>
                                <td>وحدة</td>

                            </tr>
                        </thead>

                        <tbody class="invoice_tbody">
                            <tr>@Child</tr>
                        </tbody>
                    </table>
                </face>


                <face filter="Field in ('t_servicename')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('transfername')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('routename')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('airport')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('departure_Date')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('return_Date')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('departure_routecode')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('return_routecode')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('departure_hour')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('return_hour')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('transfercost')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('transferunit')">
                    <td>@value</td>
                </face>
                <face filter="Field in ('webservices')">
                    <td>@child</td>
                </face>
                <face filter="Field in ('webservice')">@value</face>
                <face filter="Field in ('refnumber')">/@value</face>



                <face filter="Field in ('cancel') and value ='1'">

                    <input type="hidden" name="" class="canceli" value="1">
                </face>
                <face filter="Field in ('cancel') and value ='0'">

                    <input type="hidden" name="" class="canceli" value="0">
                </face>


                <face filter="type in ('Array','object')">@Child</face>
            </basis>

            </basis:333>

            <!-- type == 4 -->
            <basis:4 core="group" if="[##db.InvoiceType.Value##] in ('4')">
                <!-- city Transfer in tour -->
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','creditPay')">
                    </face>
                    <face filter="Field in ('transfer') and value <> '[]'">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>(معلومات التحويل بين المدن)</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>الوجهة الاصلية</th>
                                    <th>تاريخ</th>
                                    <th>وقت الخروج</th>
                                    <th>وقت الوصول</th>
                                    <th>شركة طيران</th>
                                    <th>شعار شركة الطيران</th>
                                    <th>مطار الأصل</th>
                                    <th>مطار الوجهة</th>
                                    <th>رقم الرحلة الجوية</th>
                                    <th>فئة الرحلة</th>
                                </tr>
                            </thead>

                            <tbody>@child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('departure','return','hotels','insurance')"></face>
                    <face filter="Field in ('route') and type in ('object')">
                        <tr>@child</tr>
                    </face>
                    <face filter="Field in ('route') and type in ('scalar.String')">
                        <td data-label="الوجهة الاصلية">@value</td>
                    </face>
                    <face filter="Field in ('etime') and type in ('scalar.String')">
                        <td data-label="وقت الخروج">@value</td>
                    </face>
                    <face filter="Field in ('atime') and type in ('scalar.String')">
                        <td data-label="وقت الوصول">@value</td>
                    </face>
                    <face filter="Field in ('class') and type in ('scalar.String')">
                        <td data-label="فئة الرحلة">@value</td>
                    </face>
                    <face filter="Field in ('routecode') and type in ('scalar.String')">
                        <td data-label="رقم الرحلة الجوية">@value</td>
                    </face>

                    <face filter="Field in ('airline')">
                        <td data-label="اسم شركة الطيران">@value</td>
                    </face>
                    <face filter="Field in ('airlineimage')">
                        <td data-label="شعار شركة الطيران"><img width="80px" src="/@value"></td>
                    </face>

                    <face filter="Field in ('routeDate')">
                        <td data-label="تاريخ">@Child</td>
                    </face>
                    <face filter="Field in ('mstring')">
                        <div>@value</div>
                    </face>

                    <face filter="Field in ('startairport')">
                        <td data-label="مطار الأصل">@Child</td>
                    </face>
                    <face filter="Field in ('endairport')">
                        <td data-label="مطار الوجهة">@Child</td>
                    </face>
                    <face filter="Field in ('airport')">
                        <div>@value</div>
                    </face>
                    <face filter="Field in ('startotherinfo')">
                        <div>@Child</div>
                    </face>
                    <face filter="Field in ('shortname')">@value | </face>
                    <face filter="Field in ('city')">@value</face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>

                <!-- insurance in tour -->
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','creditPay')">
                    </face>
                    <face filter="Field in ('products')">@Child</face>
                    <face filter="Field in ('insurance') and value <> '[]'">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>(معلومات التأمين)</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>بلد</th>
                                    <th>نوع التأمين</th>
                                    <th>شركة تأمين</th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>@child</tr>
                            </tbody>
                        </table>
                    </face>

                    <face filter="Field in ('insuranceCountry')">
                        <td data-label="بلد">@value</td>
                    </face>
                    <face filter="Field in ('insuranceName')">
                        <td data-label="نوع التأمين">@value</td>
                    </face>
                    <face filter="Field in ('insuranceProvider')">
                        <td data-label="شركة تأمين">@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>

                <!-- tourDetails in tour -->
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face filter="Field in ('invoiceDate','travelDate')"></face>
                    <face filter="Field in ('products')">@Child</face>
                    <face filter="Field in ('tourDetails') and value <> '{}'">
                        <table class="invoice_tbl tourDetails">
                            <colgroup>
                                <col width="20%">
                                </col>
                                <col width="80%">
                                </col>
                            </colgroup>

                            <caption class="invoice_caption">
                                <p><span> (تفاصيل الجولة)</span></p>
                            </caption>
                            <tbody>@child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('type') and type in ('array')">
                        <tr>
                            <td>نوع الجولة</td>
                            <td data-label="نوع الجولة">@child</td>
                        </tr>
                    </face>

                    <face filter="Field in ('appropriate') and type in ('array')">
                        <tr>
                            <td>مناسب ل</td>
                            <td data-label="مناسب ل">@child</td>
                        </tr>
                    </face>

                    <face filter="Field in ('diff') and type in ('array')">
                        <tr>
                            <td>مستوى الصعوبة</td>
                            <td data-label="مستوى الصعوبة">@child</td>
                        </tr>
                    </face>

                    <face filter="Field in ('tool') and type in ('array')">
                        <tr>
                            <td>الأساسيات المطلوبة</td>
                            <td data-label="الأساسيات المطلوبة">@child</td>
                        </tr>
                    </face>

                    <face filter="Field in ('service11') and type in ('array')">
                        <tr>
                            <td>خدمات مجانية</td>
                            <td data-label="خدمات مجانية">@child</td>
                        </tr>
                    </face>

                    <face filter="Field in ('journey') and type in ('array')">
                        <tr>
                            <td>برنامج السفر</td>
                            <td data-label="برنامج السفر">@child</td>
                        </tr>
                    </face>

                    <face filter="Field in ('description') and type in ('array')">
                        <tr>
                            <td>التفاصیل</td>
                            <td data-label="التفاصیل">@child</td>
                        </tr>
                    </face>

                    <face filter="Field in ('servicename','decs')"><span class="serviceName"> @value </span></face>
                    <face filter="Field in ('journeytitle')"><span class="serviceName"> @value : </face>
                    <face filter="Field in ('journeydesc')"> @value </span></face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:4>

            <!-- type == 5 -->
            <basis:5 core="group" if="[##db.InvoiceType.Value##] in ('5','6')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','creditPay')">
                    </face>
                    <face filter="Field in ('products')">@Child</face>
                    <face filter="Field in ('insurance')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>(معلومات التأمين)</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>بلد</th>
                                    <th>اسم التأمين</th>
                                    <th>فترة من الزمن</th>
                                    <th>شركة تأمين</th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>@child</tr>
                            </tbody>
                        </table>
                    </face>

                    <face filter="Field in ('departure','return','hotel')"></face>
                    <face filter="Field in ('country')">
                        <td data-label="بلد">@value</td>
                    </face>
                    <face filter="Field in ('name')">
                        <td data-label="اسم التأمين">@value</td>
                    </face>
                    <face filter="Field in ('Provider')">
                        <td data-label="شركة تأمين">@value</td>
                    </face>
                    <face filter="Field in ('duration') and type in ('object')">
                        <td data-label="فترة من الزمن" style="direction:rtl">@child</td>
                    </face>
                    <face filter="Field in ('duration','durationtype') and type in ('Scalar.String')"><span>
                            @value</span></face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:5>

            <!-- products type == 8 -->
            <basis:6 core="group" if="[##db.InvoiceType.Value##] in ('8')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','creditPay')">
                    </face>
                    <face filter="Field in ('products')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p>( معلومات القطار في اتجاه واحد)</p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>الوجهة الاصلية</th>
                                    <th>تاريخ</th>
                                    <th>وقت الخروج</th>
                                    <th>وقت الوصول</th>
                                    <th>اسم الشركة</th>
                                    <th>محطة المنشأ</th>
                                    <th>محطة الوجهة</th>
                                    <th>رقم القطار</th>
                                    <th>فئة القطار</th>
                                </tr>
                            </thead>

                            <tbody>@child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('route') and type in ('object')">
                        <tr>@child</tr>
                    </face>
                    <face filter="Field in ('route') and type in ('scalar.String')">
                        <td data-label="الوجهة الاصلية" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('etime') and type in ('scalar.String')">
                        <td data-label="وقت الخروج" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('atime') and type in ('scalar.String')">
                        <td data-label="وقت الوصول" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('class') and type in ('scalar.String')">
                        <td data-label="فئة القطار" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('routecode') and type in ('scalar.String')">
                        <td data-label="اسم الشركة" style="direction:rtl">@value</td>
                    </face>

                    <face filter="Field in ('trainid')">
                        <td data-label="رقم القطار">@value</td>
                    </face>

                    <face filter="Field in ('routeDate')">
                        <td data-label="تاريخ">@Child</td>
                    </face>
                    <face filter="Field in ('mstring')">
                        <div>@value</div>
                    </face>

                    <face filter="Field in ('startairport')">
                        <td data-label="محطة المنشأ">@Child</td>
                    </face>
                    <face filter="Field in ('endairport')">
                        <td data-label="محطة الوجهة">@Child</td>
                    </face>
                    <face filter="Field in ('airport')">
                        <div>@value</div>
                    </face>
                    <face filter="Field in ('startotherinfo')">
                        <div>@Child</div>
                    </face>
                    <face filter="Field in ('shortname')">@value | </face>
                    <face filter="Field in ('city')">@value</face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:6>
            <basis:16 core="group" if="[##db.InvoiceType.Value##] in ('11')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','Financial','travelDate')">
                    </face>
                    <face filter="Field in ('products')">
                        <table class="invoice_tbl product_tbl">
                            <caption class="invoice_caption">
                                <p>(معلومات الصالة)</p>
                            </caption>
                            <thead>
                                <tr>
                                    <td>اسم المنتج</td>
                                    <td>اسم المطار</td>
                                    <td>مدينة</td>
                                    <td class="th_flightType"></td>
                                    <td>تاريخ الرحلة</td>
                                    <td>وقت الرحلة</td>
                                    <td>نوع السفر</td>
                                    <td>نوع الرحلة</td>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody">@child</tbody>
                        </table>
                    </face>


                    <face filter="Field in ('cip') and type in ('object')">
                        <tr>@child</tr>
                    </face>
                    <face
                        filter="Field in ('loungename','airportname','route','time','route_k') and type in ('scalar.String')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('travelType') and value in ('1')">
                        <td>داخلي</td>
                    </face>
                    <face filter="Field in ('travelType') and value in ('2')">
                        <td>خارجي</td>
                    </face>
                    <face filter="Field in ('flightType') and value in ('1')">
                        <td><input type="hidden" value="1" class="flightType">مدخل</td>
                    </face>
                    <face filter="Field in ('flightType') and value in ('2')">
                        <td><input type="hidden" value="2" class="flightType">انتاج</td>
                    </face>


                    <face filter="Field in ('routeDate')">
                        <td>@Child</td>
                    </face>
                    <face filter="Field in ('mstring')">
                        <div>@value</div>
                    </face>

                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:16>

            <basis:18 core="group" if="[##db.InvoiceType.Value##] in ('13')">

                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','Financial','travelDate')">
                    </face>
                    <face filter="Field in ('products')">
                        <table class="invoice_tbl product_tbl">
                            <caption class="invoice_caption">
                                <p>(معلومات التأشيرة)</p>
                            </caption>
                            <thead>
                                <tr>
                                    <td>اسم المنتج</td>
                                    <td>بلد</td>
                                    <td>نموذج الفيزا</td>
                                    <td>نوع الفيزا</td>
                                    <td>عدد الوافدين</td>
                                    <td>مدة الصلاحية</td>
                                    <td>الوثائق المطلوبة</td>
                                    <td>تاريخ</td>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody">@child</tbody>
                        </table>
                    </face>


                    <face filter="Field in ('visa') and type in ('object')">
                        <tr>@child</tr>
                    </face>
                    <face
                        filter="Field in ('visaname','visacountry','application','visatype','visit_log') and type in ('scalar.String')">
                        <td>@value</td>
                    </face>

                    <face filter="Field in ('validity_duration')">
                        <td>@Child</td>
                    </face>
                    <face filter="Field in ('time')">
                        <div>@value</div>
                    </face>
                    <face filter="Field in ('months')">
                        <div>@value</div>
                    </face>

                    <face filter="Field in ('documents')">
                        <td>@Child</td>
                    </face>
                    <face filter="Field in ('name1')">
                        <div>@value</div>
                    </face>


                    <face filter="Field in ('visadate')">
                        <td>@Child</td>
                    </face>
                    <face filter="Field in ('mstring')">
                        <div>@value</div>
                    </face>

                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:18>

            <!-- products type == 9 -->
            <basis:7 core="group" if="'[##db.InvoiceType.Value##]' in ('9')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','priceDetails','baggages','bill','bill_request','creditPay')">
                    </face>
                    <face filter="Field in ('products')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p>(معلومات القطار ثنائي الاتجاه)</p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>الوجهة الاصلية</th>
                                    <th>تاريخ</th>
                                    <th>وقت الخروج</th>
                                    <th>وقت الوصول</th>
                                    <th>اسم الشركة</th>
                                    <th>محطة المنشأ</th>
                                    <th>محطة الوجهة</th>
                                    <th>رقم القطار</th>
                                    <th>فئة القطار</th>
                                </tr>
                            </thead>

                            @child
                        </table>
                    </face>

                    <face filter="Field in ('hotel','transfer','insurance')"></face>
                    <face filter="Field in ('departure') and type in ('array')">
                        <tbody>
                            <tr>
                                <td data-label="مسار المالمتبقیة" class="row_type_[##cms.form.type##]" colspan="10"
                                    style="background:#F9ECF9;text-align:right;padding-right:22px">مسار المالمتبقیة</td>
                            </tr>
                            @child
                        </tbody>
                    </face>

                    <face filter="Field in ('return') and type in ('array')">
                        <tbody>
                            <tr>
                                <td data-label="مسار العودة" class="row_type_[##cms.form.type##]" colspan="10"
                                    style="background:#F9ECF9;text-align:right;padding-right:22px">مسار العودة</td>
                            </tr>
                            @child
                        </tbody>
                    </face>

                    <face filter="Field in ('route') and type in ('object')">
                        <tr>@child</tr>
                    </face>
                    <face filter="Field in ('route') and type in ('scalar.String')">
                        <td data-label="الوجهة الاصلية" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('etime') and type in ('scalar.String')">
                        <td data-label="وقت الخروج" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('atime') and type in ('scalar.String')">
                        <td data-label="وقت الوصول" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('class') and type in ('scalar.String')">
                        <td data-label="فئة القطار" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('routecode') and type in ('scalar.String')">
                        <td data-label="اسم الشركة" style="direction:rtl">@value</td>
                    </face>
                    <face filter="Field in ('trainid')">
                        <td data-label="رقم القطار">@value</td>
                    </face>

                    <face filter="Field in ('routeDate')">
                        <td data-label="تاريخ">@Child</td>
                    </face>
                    <face filter="Field in ('mstring')">
                        <div>@value</div>
                    </face>

                    <face filter="Field in ('startairport')">
                        <td data-label="محطة المنشأ">@Child</td>
                    </face>
                    <face filter="Field in ('endairport')">
                        <td data-label="محطة الوجهة">@Child</td>
                    </face>
                    <face filter="Field in ('airport')">
                        <div>@value</div>
                    </face>
                    <face filter="Field in ('startotherinfo')">
                        <div>@Child</div>
                    </face>
                    <face filter="Field in ('shortname')">@value | </face>
                    <face filter="Field in ('city')">@value</face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:7>

            <!-- price Details ######################################################################################## -->
            <!-- type == 1,2,5,8,9 -->
            <basis:8 core="group" if="[##db.InvoiceType.Value##] in ('1','2','5','8','9','11','13')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','baggages','bill','bill_request','creditPay','invoiceDetails','account','passengers','passengersvisa','products','Financial','wheelchair','services','transfers','escortinfo')">
                    </face>
                    <face filter="Field in ('priceDetails')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>جدول الأسعار حسب الشخص</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>النطاق العمري مسافرین</th>
                                    <th>عدد الركاب</th>
                                    <th>السعر الوحدة</th>
                                    <th>السعر الكلي</th>
                                    <th>وحدة</th>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody ">@Child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('adult') and type in ('object')">
                        <tr>
                            <td data-label="النطاق العمري مسافرین">الكبار</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('child') and type in ('object')">
                        <tr>
                            <td data-label="النطاق العمري مسافرین">طفل</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('infant') and type in ('object')">
                        <tr>
                            <td data-label="النطاق العمري مسافرین">رضيع</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('perperson')">
                        <td data-label="السعر الوحدة" class="Panel_Seprator_View">@value</td>
                    </face>
                    <face filter="Field in ('total')">
                        <td data-label="السعر الكلي" class="Panel_Seprator_View">@value</td>
                    </face>
                    <face filter="Field in ('count')">
                        <td data-label="عدد الركاب">@value</td>
                    </face>
                    <face filter="Field in ('unit')">
                        <td data-label="وحدة">@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:8>

            <!-- type == 3 -->
            <basis:9 core="group" if="[##db.InvoiceType.Value##] in ('3')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','bill_request','creditPay')">
                    </face>
                    <face filter="Field in ('priceDetails')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>جدول الأسعار حسب الشخص / الغرفة</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>غرفة</th>
                                    <th>النطاق العمري مسافرین</th>
                                    <th>عدد الركاب</th>
                                    <th>السعر الوحدة (لليلة الواحدة)</th>
                                    <th>السعر الكلي (لليلة الواحدة)</th>
                                    <th>Unit</th>
                                </tr>
                            </thead>

                            @Child
                        </table>
                    </face>

                    <face filter="Field in ('room')">
                        <tbody class="invoice_tbody Room_priceDetails">@Child</tbody>
                    </face>

                    <face filter="Field in ('adult') and type in ('object')">
                        <tr>
                            <td data-label="النطاق العمري مسافرین">الكبار</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('child Withbed') and type in ('object')">
                        <tr>
                            <td data-label="النطاق العمري مسافرین">طفل (مع سرير)</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('child Withoutbed') and type in ('object')">
                        <tr>
                            <td data-label="النطاق العمري مسافرین">طفل (بدون سرير)</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('infant') and type in ('object')">
                        <tr>
                            <td data-label="النطاق العمري مسافرین">رضيع</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('extra Adult') and type in ('object')">
                        <tr>
                            <td data-label="النطاق العمري مسافرین">الكبار اضافية</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('rooms')">
                        <tr>
                            <td data-label="النطاق العمري مسافرین">-</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('perperson')">
                        <td data-label="السعر الوحدة (لليلة الواحدة)" class="Panel_Seprator_View">@value</td>
                    </face>
                    <face filter="Field in ('total')">
                        <td data-label="السعر الكلي (لليلة الواحدة)" class="Panel_Seprator_View">@value</td>
                    </face>
                    <face filter="Field in ('count')">
                        <td data-label="عدد الركاب">@value</td>
                    </face>
                    <face filter="Field in ('unit')">
                        <td data-label="وحدة">@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:9>

            <!-- type == 4 -->
            <basis:10 core="group" if="[##db.InvoiceType.Value##] in ('4')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','bill_request','creditPay')">
                    </face>
                    <face filter="Field in ('priceDetails')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>جدول الأسعار حسب الشخص / الغرفة</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>غرفة</th>
                                    <th>النطاق العمري مسافرین</th>
                                    <th>عدد الركاب</th>
                                    <th>السعر الوحدة</th>
                                    <th>السعر الكلي</th>
                                    <th>وحدة</th>
                                </tr>
                            </thead>

                            @Child
                        </table>
                    </face>

                    <face filter="Field in ('room')">
                        <tbody class="invoice_tbody Room_priceDetails">@Child</tbody>
                    </face>

                    <face filter="Field in ('adult') and type in ('object')">
                        <tr>
                            <td data-label="النطاق العمري مسافرین">الكبار</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('child Withbed') and type in ('object')">
                        <tr>
                            <td data-label="النطاق العمري مسافرین">طفل (مع سرير)</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('child Withoutbed') and type in ('object')">
                        <tr>
                            <td data-label="النطاق العمري مسافرین">طفل (بدون سرير)</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('infant') and type in ('object')">
                        <tr>
                            <td data-label="النطاق العمري مسافرین">رضيع</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('extra Adult') and type in ('object')">
                        <tr>
                            <td data-label="الكبار اضافية">الكبار اضافية</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('rooms') ">
                        <tr>
                            <td data-label="غرفة">-</td>
                            @Child
                        </tr>
                    </face>

                    <face filter="Field in ('perperson')">
                        <td data-label="السعر الوحدة" class="Panel_Seprator_View">@value</td>
                    </face>
                    <face filter="Field in ('total')">
                        <td data-label="السعر الكلي" class="Panel_Seprator_View">@value</td>
                    </face>
                    <face filter="Field in ('count')">
                        <td data-label="عدد الركاب">@value</td>
                    </face>
                    <face filter="Field in ('unit')">
                        <td data-label="وحدة">@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:10>

            <!-- type == 6 -->
            <basis:11 core="group" if="[##db.InvoiceType.Value##] in ('6')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','travelDate','account','passengers','passengersvisa','products','baggages','bill','bill_request','creditPay')">
                    </face>
                    <face filter="Field in ('priceDetails')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>جدول الأسعار حسب المنتجات</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>طيران</th>
                                    <th>الفندق</th>
                                    <th>تأمين</th>
                                    <th>المجموع</th>
                                    <th>وحدة</th>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody ">
                                <tr>@Child</tr>
                            </tbody>
                        </table>
                    </face>

                    <face filter="Field in ('flight')">
                        <td data-label="طيران" class="Panel_Seprator_View">@value</td>
                    </face>
                    <face filter="Field in ('hotel')">
                        <td data-label="الفندق" class="Panel_Seprator_View">@value</td>
                    </face>
                    <face filter="Field in ('insurance')">
                        <td data-label="تأمين" class="Panel_Seprator_View">@value</td>
                    </face>
                    <face filter="Field in ('total')">
                        <td data-label="المجموع" class="Panel_Seprator_View">@value</td>
                    </face>

                    <face filter="Field in ('unit')">
                        <td data-label="وحدة">@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:11>

            <!-- baggage ############################################################################################## -->
            <!-- type == 1,2 -->
            <basis:12 core="group" if="[##db.InvoiceType.Value##] in ('1','2','6')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','travelDate','account','passengers','passengersvisa','products','priceDetails','bill','bill_request','creditPay')">
                    </face>
                    <face filter="Field in ('baggages') and value <> '[]'">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>جدول أسعار الشحن</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>اسم و اللقب</th>
                                    <th>عنوان</th>
                                    <th>التفاصیل</th>
                                    <th>السعر الوحدة</th>
                                    <th>وحدة</th>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody ">@Child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('baggage')">
                        <tr>@Child</tr>
                    </face>
                    <face filter="Field in ('name')">
                        <td data-label="اسم و اللقب">@value</td>
                    </face>
                    <face filter="Field in ('title')">
                        <td data-label="عنوان">@value</td>
                    </face>
                    <face filter="Field in ('type')">
                        <td data-label="التفاصیل">@value</td>
                    </face>
                    <face filter="Field in ('unit')">
                        <td data-label="وحدة">@value</td>
                    </face>

                    <face filter="Field in ('cost')">
                        <td data-label="السعر الوحدة" class="Panel_Seprator_View">@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </basis:12>

            <basis:17 core="group" if="[##db.InvoiceType.Value##] in ('11')">
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','baggages','bill','bill_request','Financial','adult','child','infant','services','transfers','escortinfo')">
                    </face>
                    <face filter="Field in ('wheelchair') and type in ('Array')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p>جدول سعر كرسي متحرك</p>
                            </caption>
                            <thead>
                                <tr>

                                    <td>عدد الكراسي المتحركة</td>
                                    <td>السعر الوحدة</td>
                                    <td>السعر الكلي</td>
                                    <td>وحدة</td>
                                    <td>التفاصیل</td>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody ">
                                <tr>@Child</tr>
                            </tbody>
                        </table>
                    </face>
                    <face filter="Field in ('perperson','total')">
                        <td class="Seprator">@value</td>
                    </face>
                    <face filter="Field in ('count','unit','des_service')">
                        <td>@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account',,'passengersvisa','products','baggages','bill','bill_request','Financial','adult','child','infant','wheelchair','transfers','escortinfo')">
                    </face>
                    <face filter="Field in ('services') and type in ('Array') and value not in ('[]')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p>جدول أسعار الخدمات</p>
                            </caption>
                            <thead>
                                <tr>
                                    <td>خدمات الأسماء</td>
                                    <td>عدد</td>
                                    <td>السعر الوحدة</td>
                                    <td>السعر الكلي</td>
                                    <td>وحدة</td>
                                    <td>التفاصیل</td>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody ">@Child</tbody>
                        </table>
                    </face>
                    <face filter="Field in ('service') and type in ('Object')">
                        <tr>@child</tr>
                    </face>
                    <face filter="Field in ('perperson','total')">
                        <td class="Seprator">@value</td>
                    </face>
                    <face filter="Field in ('count','unit','name','des_service')">
                        <td>@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','baggages','bill','bill_request','Financial','adult','child','infant','wheelchair','services','escortinfo')">
                    </face>
                    <face filter="Field in ('transfers') and type in ('Array')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p>جدول أسعار التحويل</p>
                            </caption>
                            <thead>
                                <tr>
                                    <td>اسم التحويل</td>
                                    <td>العنوان</td>
                                    <td>الوقت</td>
                                    <td>رقم الهاتف</td>
                                    <td>السعر الوحدة</td>
                                    <td>السعر الكلي</td>
                                    <td>وحدة</td>
                                    <td>التفاصیل</td>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody ">@Child</tbody>
                        </table>
                    </face>
                    <face filter="Field in ('transfer') and type in ('Object')">
                        <tr>@child</tr>
                    </face>
                    <face filter="Field in ('perperson','total')">
                        <td class="Seprator">@value</td>
                    </face>
                    <face filter="Field in ('count','unit','car_name','address','time','phone','des_transfer')">
                        <td>@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>

                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','baggages','bill','bill_request','Financial','adult','child','infant','wheelchair','services','transfers')">
                    </face>
                    <face filter="Field in ('escortinfo') and type in ('Array')">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p>جدول الأسعار المصاحب</p>
                            </caption>
                            <thead>
                                <tr>
                                    <td>الإسم</td>
                                    <td>اللقب</td>
                                    <td>جنس</td>
                                    <td>السعر الوحدة</td>
                                    <td>السعر الكلي</td>
                                    <td>وحدة</td>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody ">@Child</tbody>
                        </table>
                    </face>
                    <face filter="Field in ('escort') and type in ('Object')">
                        <tr>@child</tr>
                    </face>
                    <face filter="Field in ('perperson','total')">
                        <td class="Seprator">@value</td>
                    </face>
                    <face filter="Field in ('unit','firsname','lastname')">
                        <td>@value</td>
                    </face>
                    <face filter="Field in ('gender') and value = '0'">
                        <td>أنثى</td>
                    </face>
                    <face filter="Field in ('gender') and value = '1'">
                        <td>ذكر</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>


            </basis:17>


            <!-- bill ################################################################################################# -->
            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                <face
                    filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','priceDetails','baggages','creditPay','bill_request')">
                </face>
                <face filter="Field in ('bill')">
                    <table class="invoice_tbl">
                        <caption class="invoice_caption">
                            <p><span>جدول اجمالی السعر</span></p>
                        </caption>
                        <thead>
                            <tr>
                                <th>المجموع</th>
                                <th>خصم العمولة</th>
                                <th>مقدار الخصم</th>
                                <th>رمز التخفيض</th>
                                <th>المبلغ المستحق مع خصم العمولة</th>
                                <th>وحدة</th>
                            </tr>
                        </thead>

                        <tbody class="invoice_tbody">
                            <tr>@Child</tr>
                        </tbody>
                    </table>
                </face>

                <face filter="Field in ('totalprice')">
                    <td data-label="المجموع" class="Panel_Seprator_View" style="direction:rtl">@value</td>
                </face>
                <face filter="Field in ('commission')">
                    <td data-label="خصم العمولة" class="Panel_Seprator_View" style="direction:rtl">@value</td>
                </face>
                <face filter="Field in ('couponcost')">
                    <td data-label="مقدار الخصم" class="Panel_Seprator_View" style="direction:rtl">@value</td>
                </face>
                <face filter="Field in ('totalwithcommisions')">
                    <td data-label="المبلغ المستحق مع خصم العمولة" class="Panel_Seprator_View" style="direction:rtl">
                        @value</td>
                </face>
                <face filter="Field in ('unit')">
                    <td data-label="وحدة">@value</td>
                </face>
                <face filter="Field in ('couponcode')">
                    <td data-label="رمز التخفيض">@value</td>
                </face>
                <face filter="type in ('Array','object')">@Child</face>
            </basis>

            <!-- bill_request ################################################################################################# -->
            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                <face
                    filter="Field in ('invoiceDetails','invoiceDate','account','passengers','passengersvisa','products','priceDetails','baggages','creditPay','bill')">
                </face>
                <face filter="Field in ('bill_request')">
                    <table class="invoice_tbl">
                        <caption class="invoice_caption">
                            <p><span>السعر الإجمالي بناءً على طلب العملة</span></p>
                        </caption>
                        <thead>
                            <tr>
                                <th>المجموع</th>
                                <th>خصم العمولة</th>
                                <th>مقدار الخصم</th>
                                <th>رمز التخفيض</th>
                                <th>المبلغ المستحق مع خصم العمولة</th>
                                <th>وحدة</th>
                                <th>سعر الصرف</th>
                            </tr>
                        </thead>

                        <tbody class="invoice_tbody">
                            <tr>@Child</tr>
                        </tbody>
                    </table>
                </face>

                <face filter="Field in ('totalprice')">
                    <td data-label="المجموع" class="Panel_Seprator_View" style="direction:rtl">@value</td>
                </face>
                <face filter="Field in ('commission')">
                    <td data-label="خصم العمولة" class="Panel_Seprator_View" style="direction:rtl">@value</td>
                </face>
                <face filter="Field in ('couponcost')">
                    <td data-label="مقدار الخصم" class="Panel_Seprator_View" style="direction:rtl">@value</td>
                </face>
                <face filter="Field in ('totalwithcommisions')">
                    <td data-label="المبلغ المستحق مع خصم العمولة" class="Panel_Seprator_View" style="direction:rtl">
                        @value</td>
                </face>
                <face filter="Field in ('unit')">
                    <td data-label="وحدة">@value</td>
                </face>
                <face filter="Field in ('couponcode')">
                    <td data-label="رمز التخفيض">@value</td>
                </face>
                <face filter="Field in ('currency_rate')">
                    <td class="Panel_Seprator_View">@value</td>
                </face>
                <face filter="type in ('Array','object')">@Child</face>
            </basis>


            <!-- وصف المستخدم ##################################################################################### -->
            <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid" nullvalue="null">
                <layout>
                    <table class="invoice_tbl">
                        <caption class="invoice_caption">
                            <p>وصف المستخدم</p>
                        </caption>
                        <tbody class="invoice_tbody">
                            <tr>@Child</tr>
                        </tbody>
                    </table>
                </layout>
                <face
                    filter="Field in ('invoiceDate','account','passengers','passengersvisa','products','priceDetails','baggages','bill','bill_request','Financial')">
                </face>

                <face filter="Field in ('description')">
                    <td data-label="وصف المستخدم" style="text-align:right;padding:10px;width:98%;float: right;">@value
                    </td>
                </face>
                <face filter="Field in ('userDescription ')">
                    <td data-label="وصف المستخدم" style="text-align:right;padding:10px;width:98%;float: right;">@value
                    </td>
                </face>
                <face filter="type in ('Array','object')">@Child</face>
            </basis>



            </div>

            <div id="2" class="Tab_Content">
                <table class="invoice_tbl">
                    <caption class="invoice_caption">
                        <p><span>الأمور المالية</span></p>
                    </caption>
                    <thead>
                        <tr>
                            <th>مبلغ المدین([##db.unit_title.Value##])</th>
                            <th>الدائن ([##db.unit_title.Value##])</th>
                            <th>أسم الحساب</th>
                            <th>التفاصیل</th>
                            <th>المتبقی</th>
                        </tr>
                    </thead>

                    <tbody class="invoice_tbody">
                        <basis core="print" datamembername="db.StatusAccount">
                            <face filter="RowNumber <> max(RowNumber)">
                                <tr>
                                    <td data-label="مبلغ المدین([##db.unit_title.Value##])" class="Panel_Seprator_View">
                                        @debtor</td>
                                    <td data-label="الدائن ([##db.unit_title.Value##])" class="Panel_Seprator_View">
                                        @creditor</td>
                                    <td data-label="أسم الحساب">@title</td>
                                    <td data-label="التفاصیل">@description</td>
                                    <td data-label="المتبقی">-</td>
                                </tr>
                            </face>

                            <face filter="RowNumber = max(RowNumber)">
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td data-label="المتبقی" class="Panel_Seprator_View">@taraz</td>
                                </tr>
                            </face>
                        </basis>
                        <tr></tr>
                    </tbody>
                </table>
            </div>

            <div id="3" class="Tab_Content">
                <div class="invoice_Documents">
                    <div class="invoice_Documents_top">
                        <div class="invoice_Documents_Title">
                            لعرض الوثائق وتنزيلها ، حدد أحد الخيارات الفورمة.
                        </div>

                        <ul class="invoice_Documents_state">
                            <li>
                                <label class="Panel_radio_Box">
                                    <input type="radio" name="Document_show" value="1" id="withHead"
                                        onclick="Document_show(this)" checked>
                                    <span class="Panel_check_mark"></span>
                                    قم بتنزيل الوثائق مع الفورمة
                                </label>
                            </li>

                            <li>
                                <label class="Panel_radio_Box">
                                    <input type="radio" name="Document_show" value="0" id="witouthHead"
                                        onclick="Document_show(this)">
                                    <span class="Panel_check_mark"></span>
                                    تنزيل الوثائق بدون الفورمة
                                </label>
                            </li>
                        </ul>
                    </div>

                    <div class="invoice_Documents_bottom">
                        <basis core="tree" datamembername="db.Document_Tree" idcol="id" parentidcol="parentid"
                            nullvalue="null">

                            <face filter="Field in ('Error') and value in ('invoice is Cancel')">
                                <div>لا يمكن تنزيل الوثائق الخاصة بالعقود الملغاة </div>
                            </face>

                            <face filter="Field in ('Error') and value in ('invoice is not Clear')">
                                <div>لا يمكن تنزيل الوثائق الخاصة بالعقود التي لم يتم تسويتها </div>
                            </face>

                            <face filter="Field in ('doucument')">
                                <div class="invoice_Documnet">@child</div>
                            </face>

                            <face filter="Field in ('title') and value in ('invoice')">
                                <div class="invoice_Documnet_title">
                                    قم بتنزيل العقد
                                </div>
                            </face>

                            <face filter="Field in ('title') and value in ('ticket')">
                                <div class="invoice_Documnet_title">
                                    تنزيل التذاكر
                                </div>
                            </face>

                            <face filter="Field in ('title') and value in ('voucher')">
                                <div class="invoice_Documnet_title">
                                    تحميل القسيمة
                                </div>
                            </face>

                            <face filter="Field in ('title') and value in ('insurance')">
                                <div class="invoice_Documnet_title">
                                    تحميل التأمين
                                </div>
                            </face>

                            <face filter="Field in ('title') and value in ('visa')">
                                <div class="invoice_Documnet_title">
                                    قم بتنزيل الوثائق التي تم تحميلها
                                </div>
                            </face>
                            <face filter="Field in ('title') and value in ('uploadvisa')">
                                <div class="invoice_Documnet_title">
                                    تحمیل تأشيرة
                                </div>
                            </face>

                            <face filter="Field in ('links','links_upload')">
                                <div class="invoice_Documnet_Content">
                                    @Child
                                    <div class="clr"></div>
                                </div>
                            </face>

                            <face filter="Field in ('link','link_upload') and type in ('object')">@Child</face>
                            <face filter="Field in ('whead')">
                                <div class="invoice_pdf whead">@Child</div>
                            </face>
                            <face filter="Field in ('wohead')">
                                <div class="invoice_pdf wohead" style="display:none">@Child</div>
                            </face>
                            <face filter="Field in ('whead_upload')">
                                <div class="invoice_pdf">@Child</div>
                            </face>
                            <face filter="Field in ('link','link_upload') and type in ('scalar.string')">
                                <a href="@value" class="Invoice-Doucument" target="_blank">
                                    <i class="fa fa-file-pdf-o" aria-hidden="true"></i>

                                    <a href="@value" target="_blank">
                                        <img src="[##cms.cms.cdn##]/_images/Panel-PDF.png" width="128" height="128"
                                            alt="Pdf Icon">
                            </face>

                            <face filter="Field in ('name','name_upload')">
                                <span>@value</span>
                                </a>
                            </face>
                            <face filter="type in ('object','array')">@Child</face>
                        </basis>
                    </div>
                </div>
            </div>

            <div id="4" class="Tab_Content">

                <basis core="group"
                    if="[##db.Remaining_amount.taraz##] > 0 and [##db.payment_permission.result##]='1' ">

                    <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource">
                        <member name="webservice_list" method="cms" query='
                                            { 
                                                "name": "db",
                                                "mid": "20",
                                                "member":
                                                [
                                                    { 
                                                        "name": "q", 
                                                        "type":"list",
                                                        "request": "webservice_list",
                                                        "type": "5",
                                                    }
                                                ] 
                                            } ' />
                    </basis>

                    <basis core="external.fly.ws" source="cmsDbService2" name="db" procedurename="dbsource">
                        <member name="price_payment" method="cms" query='
                                            { 
                                                "name": "db",
                                                "mid": "20",
                                                "member":
                                                [
                                                    { 
                                                        "name": "q", 
                                                        "type":"list",
                                                        "request": "price_payment",
                                                        "id": "[##cms.query.id##]"
                                                    }
                                                ] 
                                            } ' />
                    </basis>

                    <basis core="group" name="info">
                        <basis core="inlinesource" name="db">
                            <member name="bank" format="json"
                                postsql="select  Id , ParentId , case when trim(Field) is null  then  (select field from [db.bank] where id = m.parentid )else field end as field, value , type , path  from [db.bank] as m">
                                {"root":[##db.webservice_list.result##]}</member>
                        </basis>
                        <basis core="tree" datamembername="db.bank" idcol="id" parentidcol="parentid" nullvalue="null">
                            <face filter="ParentId in ('1')">
                                <table class="invoice_tbl PaymentTable">
                                    <caption class="invoice_caption">
                                        <p><span>قائمة بوابات الدفع</span></p>
                                    </caption>
                                    <thead>
                                        <tr>
                                            <th>بوابة الدفع</th>
                                            <th>رابط الدفع</th>
                                            <th>المبلغ المستحق</th>
                                        </tr>
                                    </thead>
                                    <tbody class="invoice_tbody">@child</tbody>
                                </table>
                            </face>
                            <face filter="Field in ('bank') and type in ('Object')">
                                <tr>@child</tr>
                            </face>
                            <face filter="Field in ('id')">
                                <td data-label="بوابة الدفع"><input type="hidden" name="id" value="@value"
                                        class="bankId">
                            </face>
                            <face filter="Field in ('logo')"><span><img src="@value" width="45"></span></td>
                            </face>
                            <face filter="Field in ('persianName')">
                                <td data-label="رابط الدفع"><span class="button_payment"
                                        onclick="button_payment(this)">انقر هنا للدفع عبر الإنترنت من خلال بوابة
                                        @value</span></td>
                                <td data-label="المبلغ المستحق"><span class="Panel_Seprator_View"
                                        style="margin-left: 10px;">[##db.price_payment.result##]</span><span>
                                        [##db.unit_title.Value##] </span></td>
                            </face>
                            <face filter="type in ('array','object')">@child</face>
                        </basis>
                    </basis>
                    <div class="form_payment"></div>
                    <script type="text/javascript">
                        function button_payment(a) {
                            var bankId = $(a).closest('tr').find(".bankId").val()
                            var agencyid = $(".agencyid").val()
                            var form = '<form action="AR-Panel_Connecting_Bank.bc" method="post"><input type="hidden" name="factorid" value="[##cms.query.id##]"><input type="hidden" name="bank_id" value="' + bankId + '"><input type="hidden" name="agencyid" value="' + agencyid + '"></form>'
                            $(".form_payment").html(form)
                            $(".form_payment").find("form").submit()

                        }
                    </script>
                </basis>
                <basis core="print" datamembername="db.CustomerPayment">
                    <else-layout></else-layout>
                    <layout>
                        <table class="invoice_tbl PaymentTable">
                            <caption class="invoice_caption">
                                <p><span>المدفوعات</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th> صف</th>
                                    <th> تاريخ</th>
                                    <th> الوقت</th>
                                    <th> اسم البنك</th>
                                    <th>تتبع القضية</th>
                                    <th>رقم البطاقة</th>
                                    <th>مقدار ([##db.unit_title.Value##])</th>
                                    <th> حالة</th>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody">@child</tbody>
                        </table>
                    </layout>

                    <face filter="db.payment.result=0">
                        <tr>
                            <td data-label="Row">
                                @RowNumber
                                <p style="display:none" class="CardNo">@db.payment.description</p>
                            </td>
                            <td data-label="تاريخ">@db.payment.date</td>
                            <td data-label="الوقت">@db.payment.time</td>
                            <td data-label="اسم البنك">@db.banks.name</td>
                            <td data-label="تتبع القضية">@db.payment.refnumber</td>
                            <td data-label="رقم البطاقة" class="CNO"></td>
                            <td data-label="مقدار ([##db.unit_title.Value##])" class="Panel_Seprator_View">
                                @db.payment.price</td>
                            <td data-label="حالة">غير ناجح</td>
                        </tr>
                    </face>

                    <face filter="db.payment.result=1">
                        <tr>
                            <td data-label="صف">
                                @RowNumber
                                <p style="display:none" class="CardNo">@db.payment.description</p>
                            </td>
                            <td data-label="تاريخ">@db.payment.date</td>
                            <td data-label="الوقت">@db.payment.time</td>
                            <td data-label="اسم البنك">@db.banks.name</td>
                            <td data-label="تتبع القضية">@db.payment.refnumber</td>
                            <td data-label="رقم البطاقة" class="CNO" style="direction:rtl"></td>
                            <td data-label="مقدار ([##db.unit_title.Value##])" class="Panel_Seprator_View">
                                @db.payment.price</td>
                            <td data-label="حالة">ناجح</td>
                        </tr>
                    </face>
                </basis>

                <basis core="tree" datamembername="db.InvoiceView_Tree" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <face
                        filter="Field in ('invoiceDate','invoiceDetails','passengers','passengersvisa','products','priceDetails','baggages')">
                    </face>
                    <face filter="Field in ('creditPay') and value <> '{ }'">
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>المدفوعات</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th> صف</th>
                                    <th> تاريخ</th>
                                    <th> الوقت</th>
                                    <th> اسم البنك</th>
                                    <th>مقدار ([##db.unit_title.Value##])</th>
                                    <th>حالة</th>
                                </tr>
                            </thead>

                            <tbody class="invoice_tbody">@child</tbody>
                        </table>
                    </face>

                    <face filter="Field in ('pay')">
                        <tr>@Child</tr>
                    </face>
                    <face filter="Field in ('date')">
                        <td data-label="صف">1</td>
                        <td data-label="تاريخ">@value</td>
                    </face>

                    <face filter="Field in ('time')">
                        <td data-label="Hour">@value</td>
                        <td data-label="طريقة الدفع او السداد">الدفع عن طريق الائتمان</td>
                    </face>

                    <face filter="Field in ('totalwithcommision')">
                        <td data-label="مقدار ([##db.unit_title.Value##])"><span class="Seprator">@value</span></td>
                        <td data-label="حالة">ناجح</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </div>
            <div id="5" class="Tab_Content">
                <!--Note ############################################################################################## -->
                <basis core="tree" datamembername="db.invoice_NoteList" idcol="id" parentidcol="parentid"
                    nullvalue="null">
                    <layout>
                        <table class="invoice_tbl">
                            <caption class="invoice_caption">
                                <p><span>أرشيف الملاحظات الأخيرة</span></p>
                            </caption>
                            <thead>
                                <tr>
                                    <th>صف</th>
                                    <th>اسم المرسل</th>
                                    <th>تاريخ</th>
                                    <th>الوقت</th>
                                    <th>نص الملاحظة</th>
                                    <th>رأي</th>
                                </tr>
                            </thead>
                            <tbody class="invoice_tbody">@Child</tbody>
                        </table>
                    </layout>
                    <face filter="Field in ('result')">
                        <tr>@Child</tr>
                    </face>
                    <face filter="Field in ('index')">
                        <td data-label="صف">@value</td>
                    </face>
                    <face filter="Field in ('username')">
                        <td data-label="اسم المرسل">@value</td>
                    </face>
                    <face filter="Field in ('date') and type in ('object')">
                        <td data-label="تاريخ">@child</td>
                    </face>
                    <face filter="Field in ('mstring')"><span>@value</span></face>
                    <face filter="Field in ('hour') and type in ('Scalar.String')">
                        <td data-label="الوقت">@value</td>
                    </face>
                    <face filter="Field in ('note') and type in ('Scalar.String')">
                        <td data-label="نص الملاحظة">@value</td>
                    </face>
                    <face filter="Field in ('note_type') and type in ('Scalar.String')">
                        <td data-label="رأي">@value</td>
                    </face>
                    <face filter="type in ('Array','object')">@Child</face>
                </basis>
            </div>
            <div id="6" class="Tab_Content">
                <div class="InvoiceBox" style="width:99%;margin: 5px auto;">
                    <div>املأ النموذج أدناه لتقديم طلبك لهذا العقد.</div>
                    <form action="/AR-Panel_invoice_refundSave.bc?id=[##cms.query.id##]" method="post"
                        class="invoice_Note_Form">
                        <input type="hidden" name="_root.id" value="[##cms.query.id##]">
                        <ul style="border-bottom: 0;">
                            <li class="hotelVisa-search-list">
                                <div class="right_side"><label for="eachroute" class="checkradiolink">عنوان
                                        الطلب:</label></div>
                                <div class="left_side" style="width:90%">
                                    <select name="_root.notetype" class="notetype" onchange="request(this)">
                                        <option value="5">طلب الإرجاع</option>
                                        <option value="6">اطلب التغيير</option>
                                    </select>
                                </div><!-- end left_side -->
                                <div class="clr"></div>
                            </li>
                        </ul>
                        <div class="passengerlist invoice_resize" style="display: none;">
                            <table class="invoice_tbl">
                                <thead>
                                    <tr>
                                        <td>--</td>
                                        <td>رمز دولي</td>
                                        <td>الإسم </td>
                                        <td>اللقب</td>
                                        <td>تاريخ الميلاد</td>
                                        <td>جنس</td>
                                        <td>النطاق العمري مسافرین</td>
                                    </tr>
                                </thead>
                                <tbody class="invoice_tbody">
                                    <basis core="tree" datamembername="db.passengersjson" idcol="id"
                                        parentidcol="parentid" nullvalue="null">
                                        <face filter="ParentId in ('1') ">
                                            <tr>@child</tr>
                                        </face>
                                        <face filter="Field in ('nationalcode') ">
                                            <td class="pointer fixed-width-xs ">
                                                <input id="check@ParentId" type="checkbox" class="idd Select_Check">
                                                <label for="check@ParentId"></label>
                                            </td>
                                            <td class="pointer fixed-width-xs ">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.nationalcode">
                                                @value
                                            </td>
                                        </face>
                                        <face filter="Field in ('firstname') ">
                                            <td class="pointer width3">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.firstname">
                                                @value
                                            </td>
                                        </face>
                                        <face filter="Field in ('lastname') ">
                                            <td class="pointer width3">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.lastname">
                                                @value
                                            </td>
                                        </face>
                                        <face filter="Field in ('birthdate') ">
                                            <td class="pointer width3">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.birthdate">
                                                <p>@value</p>
                                            </td>
                                        </face>
                                        <face filter="Field in ('gender') and value in ('0') ">
                                            <td class="pointer width3">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.gender">
                                                أنثى
                                            </td>
                                        </face>
                                        <face filter="Field in ('gender') and value in ('1') ">
                                            <td class="pointer width3">
                                                <input type="hidden" value="@value"
                                                    name="_root.passengers__@ParentId.gender">
                                                الذكر
                                            </td>
                                        </face>
                                        <face filter="Field in ('type') and value = '0'">
                                            <td style="direction: rtl;" class="typepassenger"> <input type="hidden"
                                                    value="@value" name="_root.passengers__@ParentId.type">رضيع</td>
                                        </face>
                                        <face filter="Field in ('type') and value = '1'">
                                            <td style="direction: rtl;" class="typepassenger"> <input type="hidden"
                                                    value="@value" name="_root.passengers__@ParentId.type">طفل</td>
                                        </face>
                                        <face filter="Field in ('type') and value = '2'">
                                            <td style="direction: rtl;" class="typepassenger"> <input type="hidden"
                                                    value="@value" name="_root.passengers__@ParentId.type">الكبار</td>
                                        </face>
                                        <face filter="Field in ('type') and value = '3'">
                                            <td style="direction: rtl;" class="typepassenger"> <input type="hidden"
                                                    value="@value" name="_root.passengers__@ParentId.type">طفل</td>
                                        </face>
                                        <face filter="Field in ('type') and value = '4'">
                                            <td style="direction: rtl;" class="typepassenger"> <input type="hidden"
                                                    value="@value" name="_root.passengers__@ParentId.type">الكبار
                                                (إضافي)</td>
                                        </face>
                                        <face filter="type in ('array','object')"> @child </face>
                                    </basis>
                                </tbody>
                            </table>
                        </div>
                        <div class="text_request">
                            <div class="invoicerequest">
                                <_textarea class="invoiceDesc" name="_root.description__0.desc" required=""
                                    placeholder="الرجاء كتابة طلبك ..."></_textarea>
                            </div>
                        </div>
                        <input class="invoice_Note_Save" type="submit" value="Submit a request">

                    </form>
                </div>
                <div class="InvoiceBox">
                    <div class="Note_ResultLoad">
                        <basis core="tree" datamembername="db.invoice_requestList" idcol="id" parentidcol="parentid"
                            nullvalue="null">
                            <layout>
                                <div class="invoice_resize invoice_resize">
                                    <table class="invoice_tbl">
                                        <caption class="invoice_caption">
                                            <p>أرشفة الطلبات الأخيرة</p>
                                        </caption>
                                        <thead>
                                            <tr>
                                                <td>صف</td>
                                                <td>اسم المرسل</td>
                                                <td>تاريخ</td>
                                                <td>الوقت</td>
                                                <td>عنوان الطلب</td>
                                                <td>Condition</td>
                                                <td>عملية</td>
                                            </tr>
                                        </thead>
                                        <tbody class="invoice_tbody">@Child</tbody>
                                    </table>
                                </div>
                            </layout>

                            <face filter="Field in ('result')">
                                <tr>@Child</tr>
                            </face>
                            <face filter="Field in ('index')">
                                <td>@value</td>
                            </face>
                            <face filter="Field in ('username')">
                                <td>@value</td>
                            </face>
                            <face filter="Field in ('date') and type in ('Object')">
                                <td>@child</td>
                            </face>

                            <face filter="Field in ('mstring')">
                                <div style="direction:rtl;color:#727272">@value</div>
                            </face>
                            <face filter="Field in ('hour') and type in ('Scalar.String')">
                                <td>@value</td>
                            </face>
                            <face filter="Field in ('note') and type in ('Scalar.String')">
                                <td class="note_txt">@value</td>
                            </face>
                            <face filter="Field in ('answer') and value in ('1')">
                                <td style="color:green">تمت المراجعة</td>
                            </face>
                            <face filter="Field in ('answer') and value in ('0')">
                                <td style="color:red">غير مدقق</td>
                            </face>
                            <face filter="Field in ('id') and type in ('Scalar.String')">
                                <td class="note_txt">
                                    <div class="btn-group-action">
                                        <div class="btn-group pull-right">
                                            <a class="edit btn btn-default"
                                                data-href="/AR-Panel_invoice_request_view.bc?cat=202&id=@value&factorid=[##cms.query.id##]&open=[##cms.query.open##]"
                                                onclick="response_view(this)">
                                                <i class="fa fa-eye" aria-hidden="true"></i>
                                                <span class="tooltip">رأي</span>
                                            </a>


                                        </div>



                                    </div>
                                </td>
                            </face>

                            <face filter="type in ('Array','object')">@Child</face>
                        </basis>
                    </div>
                </div>
                <div class="deleterequest">
                    <div class="jconfirm-box">
                        <form class="popupdelete" action="" method="post"></form>
                        <div class="title"><i class=""></i> تحذير</div>
                        <div class="content">هل أنت واثق؟</div>
                        <div class="buttons">
                            <button class="btn btn-default btn-default1 confirmButton"
                                onclick="confirmButton(this)">نعم</button>
                            <button class="btn btn-default btn-default1 cancelButton"
                                onclick="cancelButton(this)">لا</button>
                        </div>
                        <div class="clr"></div>
                    </div>
                </div>
                <div class="request_responses">
                    <div class="request_response">
                    </div>
                </div>

            </div>
            </div>
            </div>
            <basis core="call" file="AR-Panel-Dashboard-Footer.inc" />
            </div>

            <div class="clr"></div>
            </div>
            <script src="[##cms.cms.cdn##]/_js/User_Panel.js"></script>
            <script type="text/javascript">
                $(".Panel_Seprator_View").each(function () {
                    if ($(this).text().length == 0)
                        $(this).text("does not have")
                    else {
                        $(this).text(new Intl.NumberFormat().format($(this).text()))
                    }
                })
                function show_information(evt, InfoName) {
                    var i, TabContent, TabSectionTitle;

                    TabContent = document.getElementsByClassName("Tab_Content");
                    TabSectionTitle = document.getElementsByClassName("Tab_Title");

                    for (i = 0; i < TabContent.length; i++) {
                        TabContent[i].style.display = "none";
                    }
                    for (i = 0; i < TabSectionTitle.length; i++) {
                        TabSectionTitle[i].className = TabSectionTitle[i].className.replace("actives", "");
                    }
                    document.getElementById(InfoName).style.display = "block";
                    evt.currentTarget.className += " actives";
                }

                document.getElementById("defaultOpen").click();


                var x = 0;
                var y = 0;
                var cardNo = 0;

                $(".PaymentTable tbody tr").each(function () {
                    var x = $(this).find(".CardNo").text();
                    y = x.split(",")
                    cardNo = y[0];
                    cardNo = cardNo.split(":");
                    var cardNomber = cardNo[1];
                    cardNomber = cardNomber.slice(1, -1);
                    $(this).find(".CNO").text(cardNomber)
                })

                $(".Room_priceDetails").each(function () {
                    roomCount = parseInt($(this).index()) - 1
                    indexRow = $(this).find("tr").size()

                    if (roomCount == 1)
                        $(this).find("tr:nth-child(1)").find("td:nth-child(1)").before('<td data-label="غرفة" rowspan="' + indexRow + '">الغرفة الأولى</td>')

                    if (roomCount == 2)
                        $(this).find("tr:nth-child(1)").find("td:nth-child(1)").before('<td data-label="غرفة" rowspan="' + indexRow + '">الغرفة الثانية</td>')

                    if (roomCount == 3)
                        $(this).find("tr:nth-child(1)").find("td:nth-child(1)").before('<td data-label="غرفة" rowspan="' + indexRow + '">الغرفة الثالثة</td>')

                    if (roomCount == 4)
                        $(this).find("tr:nth-child(1)").find("td:nth-child(1)").before('<td data-label="غرفة" rowspan="' + indexRow + '">الغرفة الرابعة</td>')

                    if (roomCount == 5)
                        $(this).find("tr:nth-child(1)").find("td:nth-child(1)").before('<td data-label="غرفة" rowspan="' + indexRow + '">الغرفة الخامسة</td>')

                    if (roomCount == 6)
                        $(this).find("tr:nth-child(1)").find("td:nth-child(1)").before('<td data-label="غرفة" rowspan="' + indexRow + '">الغرفة السادسة</td>')
                })

                $(".active").each(function () {
                    $(this).closest(".invoice_Documnet").find(".invoice_Documnet_Content").show()
                })

                function Document_show(x) {
                    if (parseInt($(x).val()) == 1) {
                        $(".wohead").hide()
                        $(".whead").show()
                    }
                    if (parseInt($(x).val()) == 0) {
                        $(".whead").hide()
                        $(".wohead").show()
                    }
                }

                $(".wheelchair").each(function () {
                    if ($(this).val() == "1") {
                        $(this).siblings(".typepassenger").append('<div><i class="fas fa-wheelchair"></i></div>')
                    }
                })
                $(".flightType").each(function () {

                    if ($(this).val() == "1") {
                        $(this).closest("table").find(".th_flightType").text('مدينة المنشأ')
                    }
                    else {
                        $(this).closest("table").find(".th_flightType").text('المدينة الوجهة')
                    }
                })


            </script>

            <style type="text/css">
                @font-face {
                    font-family: 'IRANSansWeb';
                    src: url('http://cdn.basiscore.net/_fonts/IRANSansWeb.eot');
                    src: local('?'), url('http://cdn.basiscore.net/_fonts/IRANSansWeb.woff2') format("woff"), url('http://cdn.basiscore.net/_fonts/IRANSansWeb.ttf') format("truetype"), url('http://cdn.basiscore.net/_fonts/IRANSansWeb.otf') format("otf");
                    font-weight: 400;
                    font-style: normal
                }

                @font-face {
                    font-family: 'FontAwesome';
                    src: local('FontAwesome'), url('http://cdn.basiscore.net/_fonts/fontawesome-webfont.eot?#iefix');
                    src: local('?'), url('http://cdn.basiscore.net/_fonts/fontawesome-webfont.woff') format("woff"), url('http://cdn.basiscore.net/_fonts/fontawesome-webfont.ttf') format("truetype"), url('http://cdn.basiscore.net/_fonts/fontawesome-webfont.otf') format("otf");
                    font-weight: 400;
                    font-style: normal
                }

                @font-face {
                    font-family: 'IRANSansWeb';
                    src: url('https://cdn.basiscore.net/_fonts/IRANSansWeb.eot');
                    src: local('?'), url('https://cdn.basiscore.net/_fonts/IRANSansWeb.woff2') format("woff"), url('https://cdn.basiscore.net/_fonts/IRANSansWeb.ttf') format("truetype"), url('https://cdn.basiscore.net/_fonts/IRANSansWeb.otf') format("otf");
                    font-weight: 400;
                    font-style: normal
                }

                @font-face {
                    font-family: 'FontAwesome';
                    src: local('FontAwesome'), url('https://cdn.basiscore.net/_fonts/fontawesome-webfont.eot?#iefix');
                    src: local('?'), url('https://cdn.basiscore.net/_fonts/fontawesome-webfont.woff') format("woff"), url('https://cdn.basiscore.net/_fonts/fontawesome-webfont.ttf') format("truetype"), url('https://cdn.basiscore.net/_fonts/fontawesome-webfont.otf') format("otf");
                    font-weight: 400;
                    font-style: normal
                }

                .invoice_Details .typeDate_8,
                .invoice_Details .typeDate_9 {
                    font-size: 18px !important;
                }

                .invoice_Details .iconDate_8,
                .invoice_Details .iconDate_9 {
                    margin-top: 17px !important;
                }

                .button_payment:hover {
                    color: #3e8e41;
                    cursor: pointer;
                }

                .fa-wheelchair::before {
                    content: "\f193";
                    font-family: FontAwesome;
                    font-size: 15px;
                    font-weight: bold;
                }

                .right_side {
                    float: right;
                    width: 10%;
                }

                .left_side {
                    float: right;
                }

                .left_side select {
                    width: 230px;
                    border: 1px solid #CCC;
                    background: #F5F5F5 -moz-linear-gradient(center top, #FFF, #F5F5F5) repeat scroll 0 0 / 100% auto;
                    border-radius: 4px;
                    padding: 1px 0;
                    font-family: 'IRANSansWeb';
                }

                .invoice_Note {
                    padding: 5px 0px;
                    border: 1px solid #DEE9EC;
                    font-size: 11px;
                    background: #F5F8F9;

                    font-family: IRANSansWeb;
                    color: #555;
                    width: 30%;
                    height: 50px;
                    border-left: 0;

                }

                .invoiceDesc {
                    padding: 5px 6px;
                    border: 1px solid #C7D6DB;
                    font-size: 11px;
                    background: #F5F8F9;
                    border-radius: 4px;
                    font-family: IRANSansWeb;
                    color: #555;
                    width: 30%;
                    height: 80px;
                    margin: 10px 0;
                }

                .invoice_Note_Save:hover {
                    background-color: #E98403;
                    cursor: pointer;
                }

                .invoice_Note_Save {
                    padding: 3px 8px;
                    color: #fff;
                    background: #4D576E;
                    background-color: rgb(77, 87, 110);
                    border-radius: 4px;
                    font-family: 'IRANSansWeb';
                }

                .fa-eye::before {
                    content: "\f06e";
                    font-family: FontAwesome;
                    font-style: normal;
                    font-size: 14px;
                }

                .btn-default:hover .tooltip {
                    opacity: 1;
                    visibility: visible;
                }

                .tooltip {
                    visibility: hidden;
                    position: absolute;
                    padding: 4px 8px;
                    background: #555;
                    bottom: -27px;
                    color: #fff;
                    text-align: center;
                    z-index: 999;
                    left: 73px;
                    opacity: 0;
                    transition: all .5s;
                    -webkit-transition: all .5s;
                    -moz-transition: all .5s;
                    -o-transition: all .5s;
                    -webkit-border-radius: 5px;
                    -webkit-border-top-left-radius: 0;
                    -moz-border-radius: 5px;
                    -moz-border-radius-topleft: 0;
                    border-radius: 5px;
                    border-top-left-radius: 5px;
                    border-top-left-radius: 5px;
                    border-top-left-radius: 5px;
                    border-top-left-radius: 0;
                }

                .fa-trash::before {
                    content: "\f1f8";
                    font-family: FontAwesome;
                    font-style: normal;
                }

                .btn-group.pull-right a {
                    width: 24px;
                    text-align: center;
                    padding: 6px 0 !important;
                    border-radius: 3px !important;
                    border: 1px solid #9d9a9a;
                }

                .jconfirm-box div.title {
                    font-size: 15px;
                    font-family: inherit;
                    padding: 10px 15px 5px;
                    direction: rtl;
                    text-align: right;
                    border-top-left-radius: 5px;
                    border-top-right-radius: 5px;
                    background: #f7f7f7;
                }

                .jconfirm-box .buttons button.btn-default:hover {
                    background: #ddd !important;
                    color: #333 !important;
                }

                .jconfirm-box .buttons button.btn-default {
                    color: #333 !important;
                    border-radius: 6px !important;
                    border: 1px solid #e3e3e3 !important;
                    box-shadow: 0px 3px 2px 1px #c9c8c8 !important;
                    text-align: center !important;
                    cursor: pointer !important;
                    width: 35px !important;
                    margin-right: 4px !important;
                    height: 36px !important;
                    line-height: 36px;
                }

                .jconfirm-box .buttons button {
                    border: none;
                    background-image: none;
                    text-transform: uppercase;
                    font-size: 14px;
                    font-weight: bold;
                    text-shadow: none;
                    -webkit-transition: background .1s;
                    transition: background .1s;
                    color: white;
                }

                .jconfirm-box .buttons button+button {
                    margin-left: 5px;
                }

                .jconfirm-box {
                    transition-duration: 0.4s;
                    transition-timing-function: cubic-bezier(0.27, 1.12, 0.32, 1.5);
                    margin-top: 161px;
                    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
                    padding: 0px 0px 10px 0px;
                    border-radius: 5px;
                    width: 30%;
                    margin: 0 auto;
                    margin-top: 0px;
                    opacity: 1;
                    -webkit-transition-property: -webkit-transform, opacity, box-shadow;
                    transition-property: transform, opacity, box-shadow;
                    background: white;
                    border-radius: 4px;
                    position: relative;
                }

                .request_response {

                    margin-top: 161px;
                    padding: 10px 15px 10px 10px;
                    border-radius: 5px;
                    width: 50%;
                    margin: 0 auto;
                    margin-top: 0px;
                    opacity: 1;
                    background: white;
                    border-radius: 4px;
                    position: relative;
                    top: 100px;
                }

                .jconfirm-box .buttons {
                    float: left;
                    padding: 10px 15px;
                }

                .deleterequest,
                .request_responses {
                    display: none;
                    position: fixed;
                    background: rgba(0, 0, 0, 0.5);
                    top: 0;
                    bottom: 0;
                    left: 0;
                    right: 0;
                }

                .add_note {

                    width: 28px;
                    height: 28px;
                    background: #fff;
                    border: 1px solid #b6c7cd;
                    border-radius: 4px;
                    position: absolute;
                    top: 10px;
                    right: 759px;
                    text-align: center;
                    line-height: 30px;
                    font-size: 13px;
                    color: #238c51ed;
                    margin-top: 1px;
                    cursor: pointer;
                    float: left;
                }

                .del_time {
                    cursor: pointer;
                    width: 28px;
                    height: 28px;
                    background: #fff;
                    border: 1px solid #b6c7cd;
                    border-radius: 4px;
                    position: absolute;
                    top: 11px;
                    right: 759px;
                }
            </style>

            <script type="text/javascript">
                $(function () {
                    $(".invoice_Note_Form").on("submit", function (event) {
                        if ($(".invoiceDesc").val() == "")
                            return false

                        else {
                            $(".Select_Check").each(function () {
                                if (!$(this).prop("checked"))
                                    $(this).closest("tr").find("input[type=text],.invoiceDesc ,input[type=hidden]").attr("name", "")
                            })
                            //$(".invoiceDesc").val().replace(/\n|\r\n|\r/g, '<br>')
                            // $(".invoiceDesc").val().replace(/@|{|}|"|'|,|[|]/g, '')
                            // $(".invoiceDesc").val().replace(/<br ?\/?>/g, ' ')
                            $(".invoiceDesc").val($(".invoiceDesc").val().replace(/\n|\r\n|\r/g, 'BREAK'))
                            $(".invoiceDesc").val($(".invoiceDesc").val().replace(/@|{|}|"|'|,|[|]/g, ''))
                            $(".Note_Loading").fadeIn()
                            event.preventDefault();

                            $.ajax(
                                {
                                    url: $(".invoice_Note_Form").attr("action"),
                                    type: $(".invoice_Note_Form").attr("method"),
                                    data: $(".invoice_Note_Form").serialize(),
                                    success: function (response) {
                                        $(".Note_Loading").fadeOut();
                                        $(".Note_ResultLoad").empty().html(response);
                                        $(".invoiceDesc").val("")
                                    }
                                });
                        }
                    });
                });

                function request(a) {
                    if ($(a).val() == "6") {
                        $(a).closest("ul").siblings(".passengerlist").css("display", "block")
                    }
                    else {
                        $(a).closest("ul").siblings(".passengerlist").css("display", "none")
                    }

                }
                function popupdelete(a) {
                    $(a).closest(".InvoiceBox").siblings(".deleterequest").css("display", "block")
                    var href = $(a).attr("data-href");
                    $(a).closest(".InvoiceBox").siblings(".deleterequest").find("form").attr('action', href);


                }


                function response_view(a) {

                    $.ajax({
                        url: $(a).attr("data-href"),
                        type: "post",
                        success: function (response) {
                            $(".request_response").empty().html(response);
                            $(".request_responses").show()
                        }
                    })
                }


                function cancelButton(a) {
                    $(".deleterequest").hide()
                }
                function confirmButton(a) {
                    $(".deleterequest").find(".popupdelete").submit()

                }
                // $(document).ready(function() {
                //     $(".deleterequest").click(function(){
                //       $(".deleterequest").hide();

                //     });
                //      $(".request_responses").click(function(){
                //       $(".request_responses").hide();

                //     });
                // });
                $(document).on('click', function (event) {
                    if (!$(event.target).closest('.jconfirm-box,.del_button').length) {
                        $(".deleterequest").hide();
                    }

                })
                $(document).on('click', function (event) {
                    if (!$(event.target).closest('.request_response,.edit').length) {
                        $(".request_responses").hide();
                    }

                })
            </script>
            </body>

            </html>
        </basis>
    </basis>
</basis>
</basis>